function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{q3iL:function(e,t,i){"use strict";i.r(t),i.d(t,"CreatePostModule",(function(){return G}));var n=i("ofXK"),o=i("PCNd"),r=i("3Pt+"),s=i("fXoL"),a=i("sfw5"),l=i.n(a),c=function(){function e(e,t){this.zone=t,this._opts={immediateAngularModelUpdate:!1,angularIgnoreAttrs:null},this.SPECIAL_TAGS=["img","button","input","a"],this.INNER_HTML_ATTR="innerHTML",this._hasSpecialTag=!1,this._editorInitialized=!1,this._oldModel=null,this.onChange=function(e){},this.onTouched=function(){},this.froalaModelChange=new s.n,this.froalaInit=new s.n;var i=e.nativeElement;-1!=this.SPECIAL_TAGS.indexOf(i.tagName.toLowerCase())&&(this._hasSpecialTag=!0),this._element=i,this.zone=t}var t;return t=e,e.prototype.writeValue=function(e){this.updateEditor(e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},Object.defineProperty(e.prototype,"froalaEditor",{set:function(e){this._opts=e||this._opts},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"froalaModel",{set:function(e){this.updateEditor(e)},enumerable:!0,configurable:!0}),e.prototype.updateEditor=function(e){JSON.stringify(this._oldModel)!=JSON.stringify(e)&&(this._hasSpecialTag?this._model=e:this._oldModel=e,this._editorInitialized?this._hasSpecialTag?this.setContent():this._editor.html.set(e):this._hasSpecialTag?this.setContent():this._element.innerHTML=e||"")},e.prototype.updateModel=function(){var e=this;this.zone.run((function(){var t=null;if(e._hasSpecialTag){for(var i=e._element.attributes,n={},o=0;o<i.length;o++){var r=i[o].name;e._opts.angularIgnoreAttrs&&-1!=e._opts.angularIgnoreAttrs.indexOf(r)||(n[r]=i[o].value)}e._element.innerHTML&&(n[e.INNER_HTML_ATTR]=e._element.innerHTML),t=n}else{var s=e._editor.html.get();"string"==typeof s&&(t=s)}e._oldModel!==t&&(e._oldModel=t,e.froalaModelChange.emit(t),e.onChange(t))}))},e.prototype.registerEvent=function(e,t){e&&t&&(this._opts.events||(this._opts.events={}),this._opts.events[e]=t)},e.prototype.initListeners=function(){var e=this;this._editor.events&&(this._editor.events.on("contentChanged",(function(){setTimeout((function(){e.updateModel()}),0)})),this._editor.events.on("mousedown",(function(){setTimeout((function(){e.onTouched()}),0)})),this._opts.immediateAngularModelUpdate&&this._editor.events.on("keyup",(function(){setTimeout((function(){e.updateModel()}),0)}))),this._editorInitialized=!0},e.prototype.createEditor=function(){var e=this;this._editorInitialized||(this.setContent(!0),this.zone.runOutsideAngular((function(){e._opts.events||(e._opts.events={}),e.registerEvent("initialized",e._opts.events&&e._opts.events.initialized);var t=e._opts.events.initialized;e._opts.events.initialized&&e._opts.events.initialized.overridden||(e._opts.events.initialized=function(){e.initListeners(),t&&t.call(e._editor,e)},e._opts.events.initialized.overridden=!0),e._editor=new l.a(e._element,e._opts)})))},e.prototype.setHtml=function(){this._editor.html.set(this._model||""),this._editor.undo.reset(),this._editor.undo.saveStep()},e.prototype.setContent=function(e){void 0===e&&(e=!1);var t=this;if(this._model||""==this._model)if(this._oldModel=this._model,this._hasSpecialTag){var i=this._model;if(i){for(var n in i)i.hasOwnProperty(n)&&n!=this.INNER_HTML_ATTR&&this._element.setAttribute(n,i[n]);i.hasOwnProperty(this.INNER_HTML_ATTR)&&(this._element.innerHTML=i[this.INNER_HTML_ATTR])}}else e?this.registerEvent("initialized",(function(){t.setHtml()})):t.setHtml()},e.prototype.destroyEditor=function(){this._editorInitialized&&(this._editor.destroy(),this._editorInitialized=!1)},e.prototype.getEditor=function(){return this._element?this._editor:null},e.prototype.generateManualController=function(){var e={initialize:this.createEditor.bind(this),destroy:this.destroyEditor.bind(this),getEditor:this.getEditor.bind(this)};this.froalaInit.emit(e)},e.prototype.ngAfterViewInit=function(){this.froalaInit.observers.length?this.generateManualController():this.createEditor()},e.prototype.ngOnDestroy=function(){this.destroyEditor()},e.\u0275fac=function(t){return new(t||e)(s.Mb(s.l),s.Mb(s.z))},e.\u0275dir=s.Hb({type:e,selectors:[["","froalaEditor",""]],inputs:{froalaEditor:"froalaEditor",froalaModel:"froalaModel"},outputs:{froalaModelChange:"froalaModelChange",froalaInit:"froalaInit"},exportAs:["froalaEditor"],features:[s.Ab([{provide:r.i,useExisting:Object(s.T)((function(){return t})),multi:!0}])]}),e}(),u=function(){function e(){}var t;return t=e,e.forRoot=function(){return{ngModule:t,providers:[]}},e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)}}),e}(),h=function(){function e(){}var t;return t=e,e.forRoot=function(){return{ngModule:t,providers:[]}},e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)}}),e}(),d=i("tyNb"),p=i("8PDw"),g=i("fQFj");function f(e,t){1&e&&(s.ac(),s.Pb(0,"svg",52),s.Nb(1,"path",53),s.Nb(2,"path",54),s.Ob())}function m(e,t){1&e&&(s.ac(),s.Pb(0,"svg",55),s.Nb(1,"path",53),s.Ob())}function b(e,t){1&e&&(s.ac(),s.Pb(0,"svg",56),s.Nb(1,"path",57),s.Ob())}function v(e,t){1&e&&(s.ac(),s.Pb(0,"svg",58),s.Nb(1,"rect",59),s.Nb(2,"rect",60),s.Nb(3,"rect",61),s.Ob())}function O(e,t){1&e&&s.Nb(0,"div",62)}function M(e,t){if(1&e){var i=s.Qb();s.Pb(0,"div",63),s.Xb("click",(function(){return s.mc(i),s.bc(2).selectDraft()})),s.Pb(1,"button"),s.Pb(2,"span",64),s.sc(3,"Drafts"),s.Ob(),s.Pb(4,"span",65),s.sc(5,"1"),s.Ob(),s.Ob(),s.Ob()}}function y(e,t){if(1&e){var i=s.Qb();s.Pb(0,"div",42),s.Pb(1,"div",43),s.Pb(2,"button",44),s.Xb("click",(function(e){return s.mc(i),s.bc().changeType("text",e)})),s.rc(3,f,3,0,"svg",45),s.rc(4,m,2,0,"svg",46),s.sc(5," Text"),s.Ob(),s.Pb(6,"button",47),s.Xb("click",(function(e){return s.mc(i),s.bc().changeType("poll",e)})),s.rc(7,b,2,0,"svg",48),s.rc(8,v,4,0,"svg",49),s.sc(9," Poll"),s.Ob(),s.Ob(),s.rc(10,O,1,0,"div",50),s.rc(11,M,6,0,"div",51),s.Ob()}if(2&e){var n=s.bc();s.Bb(2),s.Db("active","text"==n.type),s.Bb(1),s.hc("ngIf","text"==n.type),s.Bb(1),s.hc("ngIf","poll"==n.type),s.Bb(2),s.Db("active","poll"==n.type),s.Bb(1),s.hc("ngIf","text"==n.type),s.Bb(1),s.hc("ngIf","poll"==n.type),s.Bb(2),s.hc("ngIf",n.draft),s.Bb(1),s.hc("ngIf",n.draft)}}function P(e,t){if(1&e){var i=s.Qb();s.Pb(0,"button",66),s.Xb("click",(function(){return s.mc(i),s.bc().saveDraft()})),s.sc(1,"Save draft"),s.Ob()}}function S(e,t){1&e&&(s.Pb(0,"div",67),s.Pb(1,"span",68),s.sc(2,"Posting..."),s.Ob(),s.Ob())}function T(e,t){if(1&e){var i=s.Qb();s.Pb(0,"button",69),s.Xb("click",(function(){return s.mc(i),s.bc().saveChanges()})),s.sc(1,"Save changes"),s.Ob()}}function x(e,t){if(1&e){var i=s.Qb();s.Pb(0,"button",69),s.Xb("click",(function(){return s.mc(i),s.bc().submit()})),s.sc(1,"Post"),s.Ob()}}function C(e,t){1&e&&(s.Pb(0,"div",70),s.Pb(1,"span"),s.sc(2,"You can't edit poll options"),s.Ob(),s.Ob())}function _(e,t){if(1&e){var i=s.Qb();s.Pb(0,"span",80),s.Xb("click",(function(){s.mc(i);var e=s.bc().index;return s.bc(2).deleteOption(e)})),s.sc(1,"x"),s.Ob()}}function w(e,t){if(1&e&&(s.Pb(0,"div",73),s.Pb(1,"div",74),s.Pb(2,"label",75),s.Pb(3,"span",76),s.sc(4),s.Ob(),s.Ob(),s.Pb(5,"div",77),s.Nb(6,"input",78),s.Ob(),s.rc(7,_,2,0,"span",79),s.Ob(),s.Ob()),2&e){var i=t.index;s.Bb(1),s.hc("formGroupName",i),s.Bb(3),s.tc(i+1),s.Bb(2),s.Cb("maxlength",30),s.Bb(1),s.hc("ngIf",i>1)}}function I(e,t){if(1&e){var i=s.Qb();s.Pb(0,"div",81),s.Pb(1,"button",82),s.Xb("click",(function(){return s.mc(i),s.bc(2).addOption()})),s.sc(2,"Add another option"),s.Ob(),s.Ob()}}function k(e,t){if(1&e&&(s.Pb(0,"div",15),s.rc(1,w,8,4,"div",71),s.rc(2,I,3,0,"div",72),s.Ob()),2&e){var i=s.bc();s.Bb(1),s.hc("ngForOf",i.formData.controls),s.Bb(1),s.hc("ngIf","poll"==i.type)}}function F(e,t){if(1&e&&(s.Pb(0,"option",89),s.sc(1),s.Ob()),2&e){var i=t.$implicit;s.hc("value",i.teamName),s.Bb(1),s.uc("",i.teamName," ")}}function B(e,t){if(1&e){var i=s.Qb();s.Pb(0,"span",90),s.Xb("click",(function(){s.mc(i);var e=s.bc().index;return s.bc(2).deleteOptionT(e)})),s.sc(1,"Delete"),s.Ob()}}function E(e,t){if(1&e&&(s.Pb(0,"div",84),s.Pb(1,"div",74),s.Pb(2,"label",16),s.sc(3,"Team (optional)"),s.Ob(),s.Pb(4,"div",85),s.Pb(5,"select",86),s.rc(6,F,2,2,"option",87),s.Ob(),s.Ob(),s.rc(7,B,2,0,"span",88),s.Ob(),s.Ob()),2&e){var i=t.index,n=s.bc(2);s.Bb(1),s.hc("formGroupName",i),s.Bb(5),s.hc("ngForOf",n.teams),s.Bb(1),s.hc("ngIf",n.formDataT.controls[0].value.postTeam.length)}}function A(e,t){if(1&e){var i=s.Qb();s.Pb(0,"div",15),s.rc(1,E,8,3,"div",83),s.Pb(2,"div",81),s.Pb(3,"button",82),s.Xb("click",(function(){return s.mc(i),s.bc().addOptionT()})),s.sc(4,"Add another team"),s.Ob(),s.Ob(),s.Ob()}if(2&e){var n=s.bc();s.Bb(1),s.hc("ngForOf",n.formDataT.controls)}}function N(e,t){1&e&&(s.Pb(0,"div",70),s.Pb(1,"span"),s.sc(2,"You can't edit the cover image"),s.Ob(),s.Ob())}function z(e,t){1&e&&(s.Pb(0,"div",97),s.sc(1," The image is of low quality. We recommend you to select another image "),s.Ob())}function R(e,t){if(1&e){var i=s.Qb();s.Pb(0,"button",98),s.Xb("click",(function(){return s.mc(i),s.bc(2).deletePicture()})),s.sc(1,"Delete"),s.Ob()}}function L(e,t){1&e&&(s.Pb(0,"label",99),s.Nb(1,"img",100),s.Ob())}function j(e,t){if(1&e&&(s.Pb(0,"div",101),s.Nb(1,"img",102),s.Ob()),2&e){var i=s.bc(2);s.Bb(1),s.hc("src",i.threadPicture,s.oc)}}function D(e,t){if(1&e){var i=s.Qb();s.Pb(0,"div"),s.Pb(1,"span",91),s.sc(2,"Cover Image"),s.Ob(),s.rc(3,z,2,0,"div",92),s.rc(4,R,2,0,"button",93),s.Pb(5,"div"),s.Pb(6,"input",94),s.Xb("change",(function(e){return s.mc(i),s.bc().onChange(e)})),s.Ob(),s.rc(7,L,2,0,"label",95),s.rc(8,j,2,1,"div",96),s.Ob(),s.Ob()}if(2&e){var n=s.bc();s.Bb(3),s.hc("ngIf",n.lowQuality),s.Bb(1),s.hc("ngIf",n.threadPicture),s.Bb(3),s.hc("ngIf",!n.threadPicture),s.Bb(1),s.hc("ngIf",n.threadPicture)}}function W(e,t){if(1&e){var i=s.Qb();s.Pb(0,"div",103),s.Pb(1,"img",104),s.Xb("click",(function(){return s.mc(i),s.bc().closeTips()})),s.Ob(),s.Pb(2,"span",105),s.sc(3,"Some tips"),s.Ob(),s.Pb(4,"ul"),s.Pb(5,"li"),s.sc(6,'To embed media from Youtube, Instagram, etc. click the "More Rich" button and then select "Embed URL"'),s.Ob(),s.Pb(7,"li"),s.sc(8,"Images are used to support your written content. Every image needs to add something to the post, it shouldn't just be there for decoration."),s.Ob(),s.Pb(9,"li"),s.sc(10,"Tables come in handy when exposing data or stats."),s.Ob(),s.Pb(11,"li"),s.sc(12,'To add subheadings to your posts, click the "More Paragraph" button, then click "Paragraph Format" and select the "Subheading" option.'),s.Ob(),s.Ob(),s.Ob()}}var H,q,U,X,Q=[{path:"",component:(q=function(){function e(t,i,n,o,r,s,a){var l=this;_classCallCheck(this,e),this.router=t,this.authService=i,this.formBuilder=n,this.route=o,this.location=r,this.platformId=s,this.threadService=a,this.fullscreen=!1,this.showTips=!1,this.posting=!1,this.editing=!1,this.errorMessage=null,this.stepOneCompleted=!1,this.type="text",this.selection="",this.url="",this.league="",this.count=120,this.title="",this.description="",this.max=120,this.pollValue="",this.testW="asdasd",this.test="",this.countDescription=300,this.loadingTeams=!1,this.draft=!1,this.options=[],this.teams=[],this.editorContent="",this.teamsAvailable=!0,this.lowQuality=!1,this.optionsFroala={key:"re1H1qA3A2C7B6A5D5hqJ-7dD-17lihhuH-8xalgE4gjkH-8D1B3D3E2E6D1G2B4E4E3==",placeholderText:"Your \ud83d\udd25 post goes here",charCounterCount:!0,imageEditButtons:["imageReplace","imageCaption","imageRemove"],imageDefaultDisplay:"block",imageDefaultAlign:"center",linkAlwaysBlank:!0,pastePlain:!0,embedlyKey:"116e3e2241ba42e49a5d9091d51206dd",imageResize:!1,attribution:!1,videoMaxSize:33554432,listAdvancedTypes:!1,fontSizeDefaultSelection:18,videoAllowedTypes:["mp4","ogg","mov"],imageAllowedTypes:["jpeg","jpg","png"],videoInsertButtons:["videoBack","|","videoUpload"],imageInsertButtons:["imageBack","|","imageUpload"],linkEditButtons:["linkOpen","linkEdit","linkRemove"],heightMin:300,toolbarStickyOffset:55,paragraphFormat:{N:"Normal",H5:"Subheading"},tableEditButtons:["tableHeader","tableRemove","|","tableRows","tableColumns","-","tableCells","tableCellHorizontalAlign"],toolbarButtons:{moreText:{buttons:["bold","italic","strikeThrough","superscript","clearFormatting"]},moreParagraph:{buttons:["alignLeft","alignCenter","formatOLSimple","formatOL","formatUL","quote","paragraphFormat",""]},moreRich:{buttons:["insertLink","insertImage","insertVideo","insertTable","embedly"]},moreMisc:{buttons:["undo","redo","fullscreen","selectAll"],align:"right",buttonsVisible:2}},events:{"video.codeError":function(e){},"video.loaded":function(e){l.captureImage(e[0].children[0])},"commands.after":function(e,t,i){"fullscreen"==e&&(l.fullscreen=!l.fullscreen)},"image.error":function(e,t){4==e.code&&l.saveDraftForError()},"image.removed":function(e){var t=e[0].src.substr(50);l.threadService.deleteS3(t).subscribe((function(e){}),(function(e){}))}}}}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.threadService.threadToEdit=void 0}},{key:"captureImage",value:function(e){var t=this;if(Object(n.o)(this.platformId)){var i=document.createElement("canvas"),o=document.createElement("video");o.setAttribute("crossorigin","anonymous"),o.setAttribute("controls",""),o.setAttribute("style","width:600px"),o.setAttribute("class","fr-draggable"),o.src=e.src,o.addEventListener("loadedmetadata",(function(){i.width=o.videoWidth,i.height=o.videoHeight,o.currentTime=2,o.addEventListener("timeupdate",(function(){i.getContext("2d").drawImage(o,0,0,i.width,i.height);var n=i.toDataURL();fetch(n).then((function(e){return e.blob()})).then((function(i){return t.getSignedRequestPoster(o,i,e)}))}))}))}}},{key:"canDeactivate",value:function(){return 1==confirm("Do you want to discard your post")&&(this.type="",this.initControls.destroy(),!0)}},{key:"ngOnInit",value:function(){var e=this;if(Object(n.o)(this.platformId)){this.threadService.posting=!1,localStorage.getItem("tipsnew")||(this.showTips=!0);var t=localStorage.getItem("draft");if(t&&(this.threadService.draftInitial=JSON.parse(t),this.draft=!0),this.threadService.threadToEdit){var i,o=this.threadService.threadToEdit;switch(o.type){case"Poll":this.type="poll";break;case"General":this.type="text";break;case"Link":this.type="link"}this.editorContent=o.description,o.pollValues&&(i=o.pollValues.map((function(t){return e.formBuilder.group({pollOption:t})}))),this.buildForm(o.league,o.title,o.url,i,void 0),this.wordCount(),o.teams.length&&this.getTeams(o,!0)}else{this.buildForm();var r=this.route.snapshot.queryParamMap.get("type");this.type=r||"text"}}}},{key:"changeType",value:function(e,t){t.stopPropagation(),this.type=e}},{key:"selectDraft",value:function(){var e=this;this.editorContent=this.threadService.draftInitial.content,this.threadService.draftInitial.league&&this.stepOneForm.controls.league.setValue(this.threadService.draftInitial.league),this.threadService.draftInitial.title&&this.stepOneForm.controls.title.setValue(this.threadService.draftInitial.title),this.threadService.draftInitial.url&&this.stepOneForm.controls.url.setValue(this.threadService.draftInitial.url),this.threadService.draftInitial.options.length&&(this.threadService.draftInitial.options=this.threadService.draftInitial.options.map((function(t){return e.formBuilder.group({pollOption:t.pollOption})})),this.stepOneForm.setControl("options",this.formBuilder.array(this.threadService.draftInitial.options))),this.threadService.draftInitial.options.length&&(this.threadService.draftInitial.options=this.threadService.draftInitial.options.map((function(t){return e.formBuilder.group({pollOption:t.pollOption})})),this.stepOneForm.setControl("options",this.formBuilder.array(this.threadService.draftInitial.options))),this.wordCount(),this.threadService.draftInitial.teams.length&&this.getTeams(this.threadService.draftInitial,!0),this.type=this.threadService.draftInitial.type,this.draft=!1}},{key:"closeTips",value:function(){Object(n.o)(this.platformId)&&(localStorage.setItem("tipsnew","viewed"),this.showTips=!1)}},{key:"buildForm",value:function(e,t,i,n,o){var s=this;n&&(n=n.map((function(e){return s.formBuilder.group({pollOption:e.pollOption})}))),this.stepOneForm=this.formBuilder.group({league:[e||"",[r.q.required]],title:[t||"",[r.q.required]],url:[i||""],options:this.formBuilder.array(n||[this.createItem(),this.createItem()]),postTeams:this.formBuilder.array(o||[this.createItemT()])})}},{key:"saveDraftForError",value:function(){var e,t=this,i=this.stepOneForm.get("postTeams").value;e=(i=i.filter((function(e){return e.postTeam.length}))).length?i.map((function(e){return t.teams.find((function(t){return t.teamName==e.postTeam}))._id})):[];var o={content:this.editorContent||this.initControls.getEditor().html.get(),title:this.stepOneForm.get("title").value||"My Draft",league:this.stepOneForm.get("league").value,url:this.stepOneForm.get("url").value,options:this.stepOneForm.get("options").value,teams:e,type:this.type};Object(n.o)(this.platformId)&&localStorage.setItem("draft",JSON.stringify(o)),this.authService.successMessage="Your draft has been saved",setTimeout((function(){t.authService.successMessage=null}),3e3),this.router.navigateByUrl("/")}},{key:"saveDraft",value:function(){var e=this;console.log(this.initControls.getEditor().html.get());var t,i=this.stepOneForm.get("postTeams").value;if(t=(i=i.filter((function(e){return e.postTeam.length}))).length?i.map((function(t){return e.teams.find((function(e){return e.teamName==t.postTeam}))._id})):[],this.stepOneForm.get("title").value){if(Object(n.o)(this.platformId))if(localStorage.getItem("draft")){if(1==confirm("Your previous draft will be deleted")){var o={content:this.editorContent||this.initControls.getEditor().html.get(),title:this.stepOneForm.get("title").value,league:this.stepOneForm.get("league").value,url:this.stepOneForm.get("url").value,teams:t,options:"poll"==this.type?this.stepOneForm.get("options").value:[],type:this.type};localStorage.setItem("draft",JSON.stringify(o)),this.authService.successMessage="Your draft has been saved",setTimeout((function(){e.authService.successMessage=null}),3e3)}}else{var r={content:this.editorContent||this.initControls.getEditor().html.get(),title:this.stepOneForm.get("title").value,league:this.stepOneForm.get("league").value,url:this.stepOneForm.get("url").value,teams:t,options:"poll"==this.type?this.stepOneForm.get("options").value:[],type:this.type};localStorage.setItem("draft",JSON.stringify(r)),this.authService.successMessage="Your draft has been saved",setTimeout((function(){e.authService.successMessage=null}),3e3)}}else this.authService.errorMessage="You must add a title to your post before saving it",setTimeout((function(){e.authService.errorMessage=null}),5e3)}},{key:"url_domain",value:function(e){if(Object(n.o)(this.platformId)){var t=document.createElement("a");return t.href=e,t.hostname}}},{key:"initialize",value:function(e){var t=this;this.initControls=e,this.threadService.getSignedRequestFroala().subscribe((function(e){t.optionsFroala.imageUploadToS3=e,t.optionsFroala.videoUploadToS3=e,t.initControls.initialize()}),(function(e){t.authService.successMessage="Something went wrong! Please try again later",setTimeout((function(){t.authService.successMessage=null}),3e3),t.location.back()}))}},{key:"createItemT",value:function(){return this.formBuilder.group({postTeam:""})}},{key:"createItem",value:function(){return this.formBuilder.group({pollOption:""})}},{key:"onChangePoster",value:function(){}},{key:"onChange",value:function(e){var t=this,i=e.target.files;if(this.file=i[0],this.fileThumbnail=i[0],this.fileWeb=i[0],this.fileType=this.file.type,this.fileTypeWeb=this.file.type,this.fileTypeThumbnail=this.fileType,this.fileName=this.authService.randomString(7)+this.authService.currentUser.username+"."+this.file.type.split("/")[1],this.fileNameThumbnail=this.authService.randomString(7)+"-thumb"+this.authService.currentUser.username+"."+this.file.type.split("/")[1],this.fileNameWeb=this.authService.randomString(7)+"-web"+this.authService.currentUser.username+"."+this.file.type.split("/")[1],!i[0].name.match(/.(jpg|jpeg|png)$/i))return this.authService.errorMessage=".webp format is not supported, please use another format (.jpg, .jpeg, or .png)",void setTimeout((function(){t.authService.errorMessage=null}),5e3);if(FileReader&&i&&i.length){var n=new FileReader;n.onload=function(){t.threadPicture=n.result},n.readAsDataURL(i[0])}loadImage(this.file,(function(e){"error"===e.type?(t.authService.errorMessage="Error loading image, please try again with another one",setTimeout((function(){t.authService.errorMessage=null}),3e3)):(t.lowQuality=e.width<400,e.toBlob((function(e){t.file=e,loadImage(t.fileThumbnail,(function(e){"error"===e.type?(t.authService.errorMessage="Error loading image, please try again with another one",setTimeout((function(){t.authService.errorMessage=null}),3e3)):e.toBlob((function(e){t.fileThumbnail=e,loadImage(t.fileWeb,(function(e){"error"===e.type?(t.authService.errorMessage="Error loading image, please try again with another one",setTimeout((function(){t.authService.errorMessage=null}),3e3)):e.toBlob((function(e){t.fileWeb=e}),t.fileType)}),{maxWidth:1500,orientation:!0})}),t.fileType)}),{maxWidth:200,orientation:!0})}),t.fileType))}),{maxWidth:800,orientation:!0}),null==this.file&&(this.authService.errorMessage="No file selected",setTimeout((function(){t.authService.errorMessage=null}),3e3))}},{key:"deletePicture",value:function(){this.file=void 0,this.fileType=void 0,this.fileName=void 0,this.threadPicture=void 0,this.lowQuality=!1}},{key:"wordCount",value:function(){this.count=this.max-this.stepOneForm.get("title").value.length}},{key:"goBack",value:function(){this.location.back()}},{key:"addOption",value:function(){var e=this;this.optionsForm=this.stepOneForm.get("options"),this.optionsForm.length<6?this.optionsForm.push(this.createItem()):(this.authService.errorMessage="You have reached the maximum number of options for your poll",setTimeout((function(){e.authService.errorMessage=null}),4e3))}},{key:"addOptionT",value:function(){this.postTeamsForm=this.stepOneForm.get("postTeams"),this.postTeamsForm.push(this.createItemT())}},{key:"deleteOption",value:function(e){this.optionsForm=this.stepOneForm.get("options"),this.optionsForm.removeAt(e)}},{key:"deleteOptionT",value:function(e){e>0?(this.postTeamsForm=this.stepOneForm.get("postTeams"),this.postTeamsForm.removeAt(e)):this.stepOneForm.setControl("postTeams",this.formBuilder.array([this.createItemT()]))}},{key:"onTeamChange",value:function(e){var t={league:e.target.value};this.postTeamsForm=this.stepOneForm.get("postTeams");for(var i=0;i<this.postTeamsForm.length;i++)this.postTeamsForm.removeAt(i);this.stepOneForm.setControl("postTeams",this.formBuilder.array([this.createItemT()])),this.getTeams(t,!1)}},{key:"getTeams",value:function(e,t){var i=this;this.authService.getAllTeams(e.league).subscribe((function(n){var o;i.teamsAvailable=0!=n.length,n.sort((function(e,t){return e.teamName>t.teamName?1:-1})),i.teams=n,t&&e.teams[0].length&&(o=e.teams.map((function(e){var t=n.find((function(t){return t._id==e})).teamName;return i.formBuilder.group({postTeam:t})})),i.postTeamsForm=i.stepOneForm.get("postTeams"),i.stepOneForm.setControl("postTeams",i.formBuilder.array(o)))}),(function(e){i.loadingTeams=!1,i.authService.errorMessage="Error loading teams, please try again later",setTimeout((function(){i.authService.errorMessage=null}),5e3)}))}},{key:"getSignedRequest",value:function(e,t,i,n){var o=this;this.threadService.getSignedRequest(this.fileName,this.fileType).subscribe((function(e){o.signedRequestAWS=e.signedRequest,o.urlAWS=e.url,o.threadService.getSignedRequest(o.fileNameThumbnail,o.fileTypeThumbnail).subscribe((function(e){o.signedRequestThumbnailAWS=e.signedRequest,o.urlThumbnailAWS=e.url,o.threadService.getSignedRequest(o.fileNameWeb,o.fileTypeWeb).subscribe((function(e){o.signedRequestWebAWS=e.signedRequest,o.urlWebAWS=e.url,o.uploadFile(o.file,o.signedRequestAWS,o.urlAWS,t,o.fileThumbnail,o.signedRequestThumbnailAWS,o.urlThumbnailAWS,o.fileWeb,o.signedRequestWebAWS,o.urlWebAWS)}),(function(e){o.authService.errorMessage=e,setTimeout((function(){o.authService.errorMessage=null}),5e3),o.posting=!1}))}),(function(e){o.authService.errorMessage=e,setTimeout((function(){o.authService.errorMessage=null}),5e3),o.posting=!1}))}),(function(e){o.authService.errorMessage=e,setTimeout((function(){o.authService.errorMessage=null}),5e3),o.posting=!1}))}},{key:"uploadFile",value:function(e,t,i,o,r,s,a,l,c,u){var h=this;this.authService.uploadFile(t,e).subscribe((function(){h.authService.uploadFile(s,r).subscribe((function(){h.authService.uploadFile(c,l).subscribe((function(){var e=i.replace(/\s+/g,"+");o.picture=e;var t=a.replace(/\s+/g,"+");o.thumbnail=t;var r=u.replace(/\s+/g,"+");o.webPicture=r,h.url?h.threadService.newLinkThread(o).subscribe((function(e){var t=e.thread,i=e.error;t?(h.threadService.posting=!0,Object(n.o)(h.platformId)&&localStorage.setItem("draft",""),h.router.navigateByUrl("/")):(h.authService.errorMessage=i,setTimeout((function(){h.authService.errorMessage=null}),5e3),h.posting=!1)}),(function(e){h.authService.errorMessage=e,setTimeout((function(){h.authService.errorMessage=null}),5e3),h.posting=!1})):h.threadService.newThread(o).subscribe((function(e){var t=e.thread,i=e.error;t?(h.threadService.posting=!0,Object(n.o)(h.platformId)&&localStorage.setItem("draft",""),h.router.navigateByUrl("/")):(h.authService.errorMessage=i,setTimeout((function(){h.authService.errorMessage=null}),5e3),h.posting=!1)}),(function(e){h.authService.errorMessage=e,setTimeout((function(){h.authService.errorMessage=null}),5e3),h.posting=!1}))}))}),(function(e){h.authService.errorMessage=e,setTimeout((function(){h.authService.errorMessage=null}),5e3),h.posting=!1}))}),(function(e){h.authService.errorMessage=e,setTimeout((function(){h.authService.errorMessage=null}),5e3),h.posting=!1}))}},{key:"getSignedRequestPoster",value:function(e,t,i){var n=this,o=this.authService.randomString(7)+this.authService.currentUser.username+".png";this.threadService.getSignedRequest(o,"image/png").subscribe((function(o){n.uploadFilePoster(o.signedRequest,t,e,o.url,i)}),(function(e){n.authService.errorMessage=e,setTimeout((function(){n.authService.errorMessage=null}),5e3),n.posting=!1}))}},{key:"uploadFilePoster",value:function(e,t,i,n,o){var r=this;this.authService.uploadFile(e,t).subscribe((function(){var e=n.replace(/\s+/g,"+");i.poster=e,o.parentNode.replaceChild(i,o)}),(function(e){r.authService.errorMessage=e,setTimeout((function(){r.authService.errorMessage=null}),5e3),r.posting=!1}))}},{key:"saveChanges",value:function(){var e=this;this.league=this.stepOneForm.get("league").value,this.title=this.stepOneForm.get("title").value,this.url=this.stepOneForm.get("url").value,this.description=this.editorContent||this.initControls.getEditor().html.get();var t=this.stepOneForm.get("postTeams").value;if(this.teamsMapped=t.map((function(e){return e.postTeam})),this.teamsMapped=this.teamsMapped[0].length?this.teamsMapped.map((function(t){return e.teams.find((function(e){return e.teamName==t}))._id})):null,this.editing=!0,"link"!=this.type){if(this.initControls.getEditor().charCounter.count()<600)return this.authService.errorMessage="The post must have at least 600 characters.",setTimeout((function(){e.authService.errorMessage=null}),3e3),void(this.editing=!1);if(!this.title)return this.authService.errorMessage="Please add a title",setTimeout((function(){e.authService.errorMessage=null}),3e3),void(this.editing=!1)}this.threadService.edit(this.threadService.threadToEdit._id,{userId:this.authService.currentUser._id,league:this.league,title:this.title,description:"url"==this.type?void 0:this.description,url:this.url?this.url:void 0,teams:null!=this.teamsMapped?this.teamsMapped:[]}).subscribe((function(t){e.editing=!1,e.threadService.posting=!0,Object(n.o)(e.platformId)&&localStorage.setItem("draft",""),e.threadService.threadToEditOriginal.league=e.league,e.threadService.threadToEditOriginal.title=e.title,e.threadService.threadToEditOriginal.teams=null!=e.teamsMapped?e.teamsMapped:[],e.threadService.threadToEditOriginal.url=e.url?e.url:void 0,e.threadService.threadToEditOriginal.description="url"==e.type?void 0:e.description,e.location.back()}),(function(t){e.authService.errorMessage="The post must have at least 800 characters.",setTimeout((function(){e.authService.errorMessage=null}),3e3),e.editing=!1}))}},{key:"submit",value:function(){var e=this;this.posting=!0,this.league=this.stepOneForm.get("league").value,this.title=this.stepOneForm.get("title").value,this.url=this.stepOneForm.get("url").value,this.description=this.editorContent||this.initControls.getEditor().html.get();var t=this.stepOneForm.get("options").value,i=this.stepOneForm.get("postTeams").value;if(this.options=t.map((function(e){return e.pollOption})),this.teamsMapped=i.map((function(e){return e.postTeam})),this.teamsMapped=this.teamsMapped.filter((function(e){return e.length})),this.teamsMapped=this.teamsMapped.length&&this.teamsMapped[0].length?this.teamsMapped.map((function(t){return e.teams.find((function(e){return e.teamName==t}))._id})):null,"text"==this.type){if(this.initControls.getEditor().charCounter.count()<300)return this.authService.errorMessage="The post must have at least 300 characters.",setTimeout((function(){e.authService.errorMessage=null}),3e3),void(this.posting=!1);if(this.title&&this.description&&this.league){var o={title:this.title,description:this.description,league:this.league,type:"General",fromWeb:!0,teams:null!=this.teamsMapped?this.teamsMapped:void 0};this.file?this.getSignedRequest(this.file,o,this.fileThumbnail,this.fileWeb):this.threadService.newThread(o).subscribe((function(t){var i=t.thread,o=t.error;i?(e.threadService.posting=!0,Object(n.o)(e.platformId)&&localStorage.setItem("draft",""),e.router.navigateByUrl("/")):(e.authService.errorMessage=o,setTimeout((function(){e.authService.errorMessage=null}),5e3),e.posting=!1)}),(function(t){e.authService.errorMessage=t,setTimeout((function(){e.authService.errorMessage=null}),5e3),e.posting=!1}))}else this.title?(this.authService.errorMessage="Please select a feed",setTimeout((function(){e.authService.errorMessage=null}),5e3),this.posting=!1):(this.authService.errorMessage="Please enter a title",setTimeout((function(){e.authService.errorMessage=null}),5e3),this.posting=!1)}else if("poll"==this.type){if(this.initControls.getEditor().charCounter.count()<300)return this.authService.errorMessage="The post must have at least 300 characters.",setTimeout((function(){e.authService.errorMessage=null}),5e3),void(this.posting=!1);if(this.title&&this.description&&this.league&&this.options.length>=2&&this.authService.isLoggedIn()){for(var r=0;r<this.options.length;r++){var s=this.options[r];if(s.length<=1)return this.authService.errorMessage="Polls must containt at least 2 options",setTimeout((function(){e.authService.errorMessage=null}),5e3),void(this.posting=!1);0==s.length&&this.options.splice(r,1)}var a={title:this.title,description:this.description,pollValues:this.options,league:this.league,type:"Poll",fromWeb:!0,teams:null!=this.teamsMapped?this.teamsMapped:void 0};this.file?this.getSignedRequest(this.file,a,this.fileThumbnail,this.fileWeb):this.threadService.newThread(a).subscribe((function(t){var i=t.thread,o=t.error;i?(e.threadService.posting=!0,Object(n.o)(e.platformId)&&localStorage.setItem("draft",""),e.router.navigateByUrl("/")):(e.authService.errorMessage=o,setTimeout((function(){e.authService.errorMessage=null}),5e3),e.posting=!1)}),(function(t){e.authService.errorMessage=t,setTimeout((function(){e.authService.errorMessage=null}),5e3),e.posting=!1}))}else this.title?this.league?(this.authService.errorMessage="Missing fields",setTimeout((function(){e.authService.errorMessage=null}),5e3),this.posting=!1):(this.authService.errorMessage="Please select a feed to post",setTimeout((function(){e.authService.errorMessage=null}),5e3),this.posting=!1):(this.authService.errorMessage="Please enter a title",setTimeout((function(){e.authService.errorMessage=null}),5e3),this.posting=!1)}else if(this.title&&this.url&&this.authService.isLoggedIn()&&this.league){/^((http|https|ftp):\/\/)/.test(this.url)||(this.url="http://"+this.url);var l={titleL:this.title,source:this.url_domain(this.url),urlL:this.url,leagueL:this.league,type:"Link",fromWeb:!0,teams:null!=this.teamsMapped?this.teamsMapped:void 0};this.file?this.getSignedRequest(this.file,l,this.fileThumbnail,this.fileWeb):this.threadService.newLinkThread(l).subscribe((function(t){var i=t.thread,o=t.error;i?(e.threadService.posting=!0,Object(n.o)(e.platformId)&&localStorage.setItem("draft",""),e.router.navigateByUrl("/")):(e.authService.errorMessage=o,setTimeout((function(){e.authService.errorMessage=null}),5e3),e.posting=!1)}),(function(t){e.authService.errorMessage=t,setTimeout((function(){e.authService.errorMessage=null}),5e3),e.posting=!1}))}else this.title?(this.authService.errorMessage="Please enter a valid url",setTimeout((function(){e.authService.errorMessage=null}),5e3),this.posting=!1):(this.authService.errorMessage="Please add a title",setTimeout((function(){e.authService.errorMessage=null}),5e3),this.posting=!1)}},{key:"formData",get:function(){return this.stepOneForm.get("options")}},{key:"formDataT",get:function(){return this.stepOneForm.get("postTeams")}}]),e}(),q.\u0275fac=function(e){return new(e||q)(s.Mb(d.f),s.Mb(p.a),s.Mb(r.c),s.Mb(d.a),s.Mb(n.g),s.Mb(s.B),s.Mb(g.a))},q.\u0275cmp=s.Gb({type:q,selectors:[["app-create-post"]],decls:65,vars:17,consts:[[1,"new-post-container"],[1,"sub-container"],[1,"new-post-text"],["class","drafts",4,"ngIf"],[1,"steps-container"],["type","button","class","btn btn-outline-dark",3,"click",4,"ngIf"],[1,"posting-cont"],["class","spinner-border text-success","role","status",4,"ngIf"],["type","button","class","btn btn-outline-success",3,"click",4,"ngIf"],[1,"main-container"],[1,"froala-container"],[1,"row"],[1,"col-md-9","col-sm-12"],[1,"form-container"],[3,"formGroup"],[1,"form-group","row"],["for","league",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["formControlName","league",1,"form-control",3,"change"],["value","NBA"],["value","NFL"],["value","Soccer"],["value","MLB"],["value","NHL"],["value","NCAAF"],["value","NCAAB"],["value","NFL Fantasy"],["value","MMA"],["value","Boxing"],["value","Tennis"],["value","Golf"],["value","Motorsports"],["value","General"],["for","title",1,"col-sm-2","col-form-label"],[1,"count"],["type","text","spellcheck","true","autocomplete","off","autocapitalize","on","formControlName","title","id","title","placeholder","Enter a title for your post","maxlength","120",1,"form-control",3,"keyup","keydown"],["class","no-poll",4,"ngIf"],["class","form-group row",4,"ngIf"],[3,"froalaEditor","froalaModel","froalaInit","froalaModelChange"],[1,"col-md-3","col-sm-12"],[4,"ngIf"],["class","tips-container",4,"ngIf"],[1,"drafts"],[1,"type-container"],[1,"type-button","text-button",3,"click"],["class","bi bi-file-text","width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["class","bi bi-file","width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],[1,"type-button",3,"click"],["class","bi bi-bar-chart","width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["class","bi bi-bar-chart-fill","width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["class","divider",4,"ngIf"],["class","drafts-container",3,"click",4,"ngIf"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-file-text"],["fill-rule","evenodd","d","M4 1h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2zm0 1a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H4z"],["fill-rule","evenodd","d","M4.5 10.5A.5.5 0 0 1 5 10h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zm0-2A.5.5 0 0 1 5 8h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zm0-2A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zm0-2A.5.5 0 0 1 5 4h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5z"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-file"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-bar-chart"],["fill-rule","evenodd","d","M4 11H2v3h2v-3zm5-4H7v7h2V7zm5-5h-2v12h2V2zm-2-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-2zM6 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm-5 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3z"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-bar-chart-fill"],["width","4","height","5","x","1","y","10","rx","1"],["width","4","height","9","x","6","y","6","rx","1"],["width","4","height","14","x","11","y","1","rx","1"],[1,"divider"],[1,"drafts-container",3,"click"],[1,"draft-text"],[1,"draft-number"],["type","button",1,"btn","btn-outline-dark",3,"click"],["role","status",1,"spinner-border","text-success"],[1,"sr-only"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"no-poll"],["formArrayName","options","class","poll-flex",4,"ngFor","ngForOf"],["id","add-button-item",4,"ngIf"],["formArrayName","options",1,"poll-flex"],[1,"poll-group",3,"formGroupName"],[1,"col-form-label","poll-labels","col-sm-2"],[1,"inner-no"],[1,"poll-values","col-sm-5"],["formControlName","pollOption","type","text","autocapitalize","on","autocomplete","off","id","poll","placeholder","Poll option",1,"form-control"],["class","delete-option",3,"click",4,"ngIf"],[1,"delete-option",3,"click"],["id","add-button-item"],["type","button",1,"btn","btn-outline-dark","btn-sm",3,"click"],["formArrayName","postTeams","class","poll-flex",4,"ngFor","ngForOf"],["formArrayName","postTeams",1,"poll-flex"],[1,"col-sm-8"],["formControlName","postTeam",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["class","delete-option-t",3,"click",4,"ngIf"],[3,"value"],[1,"delete-option-t",3,"click"],[1,"c-label"],["class","low",4,"ngIf"],["type","button","class","btn btn-danger btn-sm",3,"click",4,"ngIf"],["accept","image/*","id","file","type","file",1,"form-control-file","inputfile",3,"change"],["id","label-profile-picture","for","file",4,"ngIf"],["class","image-container",4,"ngIf"],[1,"low"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],["id","label-profile-picture","for","file"],["src","assets/imgs/add.png","alt","",1,"add-pic"],[1,"image-container"],["alt","",1,"thread-pic",3,"src"],[1,"tips-container"],["src","assets/imgs/close.png","alt","",1,"close-tips",3,"click"],[1,"c-label","tips"]],template:function(e,t){1&e&&(s.Pb(0,"div",0),s.Pb(1,"div",1),s.Pb(2,"h1",2),s.sc(3,"New Post"),s.Ob(),s.rc(4,y,12,10,"div",3),s.Pb(5,"div",4),s.rc(6,P,2,0,"button",5),s.Pb(7,"div",6),s.rc(8,S,3,0,"div",7),s.rc(9,T,2,0,"button",8),s.rc(10,x,2,0,"button",8),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(11,"div",9),s.Pb(12,"div",10),s.Pb(13,"div",11),s.Pb(14,"div",12),s.Pb(15,"div",13),s.Pb(16,"form",14),s.Pb(17,"div",15),s.Pb(18,"label",16),s.sc(19,"Feed"),s.Ob(),s.Pb(20,"div",17),s.Pb(21,"select",18),s.Xb("change",(function(e){return t.onTeamChange(e)})),s.Pb(22,"option",19),s.sc(23,"NBA"),s.Ob(),s.Pb(24,"option",20),s.sc(25,"NFL"),s.Ob(),s.Pb(26,"option",21),s.sc(27,"Soccer"),s.Ob(),s.Pb(28,"option",22),s.sc(29,"MLB"),s.Ob(),s.Pb(30,"option",23),s.sc(31,"NHL"),s.Ob(),s.Pb(32,"option",24),s.sc(33,"NCAAF"),s.Ob(),s.Pb(34,"option",25),s.sc(35,"NCAAB"),s.Ob(),s.Pb(36,"option",26),s.sc(37,"NFL Fantasy"),s.Ob(),s.Pb(38,"option",27),s.sc(39,"MMA"),s.Ob(),s.Pb(40,"option",28),s.sc(41,"Boxing"),s.Ob(),s.Pb(42,"option",29),s.sc(43,"Tennis"),s.Ob(),s.Pb(44,"option",30),s.sc(45,"Golf"),s.Ob(),s.Pb(46,"option",31),s.sc(47,"Motorsports"),s.Ob(),s.Pb(48,"option",32),s.sc(49,"General"),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(50,"div",15),s.Pb(51,"label",33),s.sc(52,"Title "),s.Pb(53,"span",34),s.sc(54),s.Ob(),s.Ob(),s.Pb(55,"div",17),s.Pb(56,"input",35),s.Xb("keyup",(function(){return t.wordCount()}))("keydown",(function(){return t.wordCount()})),s.Ob(),s.Ob(),s.Ob(),s.rc(57,C,3,0,"div",36),s.rc(58,k,3,2,"div",37),s.rc(59,A,5,1,"div",37),s.Ob(),s.Ob(),s.Pb(60,"div",38),s.Xb("froalaInit",(function(e){return t.initialize(e)}))("froalaModelChange",(function(e){return t.editorContent=e})),s.Ob(),s.Ob(),s.Pb(61,"div",39),s.rc(62,N,3,0,"div",36),s.rc(63,D,9,4,"div",40),s.rc(64,W,13,0,"div",41),s.Ob(),s.Ob(),s.Ob(),s.Ob()),2&e&&(s.Bb(4),s.hc("ngIf",!t.threadService.threadToEdit),s.Bb(2),s.hc("ngIf",!t.threadService.threadToEdit),s.Bb(2),s.hc("ngIf",t.posting),s.Bb(1),s.hc("ngIf",!t.editing&&t.threadService.threadToEdit),s.Bb(1),s.hc("ngIf",!t.posting&&!t.threadService.threadToEdit),s.Bb(6),s.hc("formGroup",t.stepOneForm),s.Bb(38),s.uc("(",t.count,")"),s.Bb(3),s.hc("ngIf",t.threadService.threadToEdit&&"poll"==t.type),s.Bb(1),s.hc("ngIf","poll"==t.type&&!t.threadService.threadToEdit),s.Bb(1),s.hc("ngIf",t.teamsAvailable),s.Bb(1),s.Db("c-full",t.fullscreen),s.hc("froalaEditor",t.optionsFroala)("froalaModel",t.editorContent),s.Bb(2),s.hc("ngIf",t.threadService.threadToEdit),s.Bb(1),s.hc("ngIf",!t.threadService.threadToEdit),s.Bb(1),s.hc("ngIf",t.showTips))},directives:[n.j,r.s,r.k,r.e,r.p,r.j,r.d,r.m,r.r,r.a,r.h,c,n.i,r.b,r.f],styles:["*[_ngcontent-%COMP%]{font-size:1.6rem}.low[_ngcontent-%COMP%]{font-size:1.3rem;background:#e43b3b;color:#fff;padding:10px;border-radius:4px;margin:10px 0}.new-post-container[_ngcontent-%COMP%]{height:80px}.sub-container[_ngcontent-%COMP%]{justify-content:flex-start;height:100%;width:85%;margin:0 auto;max-width:1200px}.posting-cont[_ngcontent-%COMP%], .sub-container[_ngcontent-%COMP%]{align-items:center;display:flex}.posting-cont[_ngcontent-%COMP%]{width:70px;justify-content:center}.inputfile[_ngcontent-%COMP%]{display:none}#add-button-item[_ngcontent-%COMP%]{margin:16px 0}.add-pic[_ngcontent-%COMP%]{height:20px;width:20px;-o-object-fit:contain;object-fit:contain}.back-cont[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:13px;margin-right:10px}.back-cont[_ngcontent-%COMP%]{display:inline-flex;margin-right:40px}#label-profile-picture[_ngcontent-%COMP%], .back-cont[_ngcontent-%COMP%]{align-items:center;justify-content:center;cursor:pointer}#label-profile-picture[_ngcontent-%COMP%]{height:200px;width:200px;margin:20px 0;font-weight:700;display:block;padding:12px 0;display:flex;text-align:center;color:#4264d0;font-size:14px;outline:none;border:2px solid #4264d0;border-radius:20px}.image-container[_ngcontent-%COMP%], .video-container[_ngcontent-%COMP%]{position:relative}.image-container[_ngcontent-%COMP%]   .trash[_ngcontent-%COMP%]{position:absolute;color:#fff;top:10px;right:10px;font-size:25px}.cover-img[_ngcontent-%COMP%]{width:300px;border-radius:5px}#label-profile-picture[_ngcontent-%COMP%]:hover{background:rgba(66,100,208,.33)}.thread-pic[_ngcontent-%COMP%]{width:100%;border-radius:5px;margin-top:20px}.poll-group[_ngcontent-%COMP%]{justify-content:flex-start;margin:10px 0}.inner-no[_ngcontent-%COMP%], .poll-group[_ngcontent-%COMP%]{display:flex;align-items:center}.inner-no[_ngcontent-%COMP%]{background:#4264d0;width:20px;height:20px;justify-content:center;border-radius:50px;padding:13px;font-size:14px;color:#fff}.poll-values[_ngcontent-%COMP%]{width:50%}.poll-flex[_ngcontent-%COMP%]{width:100%}.c-label[_ngcontent-%COMP%]{display:inline-block;padding:5px 0;border-bottom:2px solid #4264d0;font-weight:500;font-size:14px;margin-right:20px}.c-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-container[_ngcontent-%COMP%]{margin-bottom:40px}.main-container[_ngcontent-%COMP%]{background:#fff}.froala-container[_ngcontent-%COMP%]{width:85%;margin:0 auto;padding:50px 0;max-width:1200px}.no-poll[_ngcontent-%COMP%]{font-style:italic}.new-post-text[_ngcontent-%COMP%]{font-weight:700;font-size:30px;font-weight:500!important}button[_ngcontent-%COMP%]{margin:0 5px}.steps[_ngcontent-%COMP%]{margin:0 10px}.drafts[_ngcontent-%COMP%]{margin-left:25px;height:100%}.drafts[_ngcontent-%COMP%], .drafts[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.drafts[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;color:inherit;border:none;padding:0;font:inherit;cursor:pointer;outline:inherit}.drafts[_ngcontent-%COMP%]   .type-button[_ngcontent-%COMP%]{padding:8px 0;color:#7c7c7c;cursor:pointer;font-size:13px;text-transform:uppercase;font-weight:700}.drafts[_ngcontent-%COMP%]   .type-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:5px;font-size:14px}.drafts[_ngcontent-%COMP%]   .text-button[_ngcontent-%COMP%]{margin-right:20px}.drafts[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#4264d0;border-bottom:2px solid #4264d0}.drafts[_ngcontent-%COMP%]   .draft-text[_ngcontent-%COMP%]{font-weight:700;font-size:1.4rem;text-transform:uppercase;color:#4264d0;cursor:pointer}.drafts[_ngcontent-%COMP%]   .draft-number[_ngcontent-%COMP%]{height:18px;width:18px;color:#fff;background:#1c1c1c;display:inline-flex;align-items:center;justify-content:center;font-size:10px;border-radius:5px;margin-left:5px;cursor:pointer}.steps-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:auto}.c-card[_ngcontent-%COMP%]{min-height:160px;border-radius:5px}.tips[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]     h5{font-size:2rem!important}[_nghost-%COMP%]     .fr-box.fr-basic .fr-element{color:#171717;font-size:1.5rem}[_nghost-%COMP%]     .fr-fullscreen div.fr-view{width:816px;margin:10px auto;box-shadow:0 1px 3px 1px rgba(60,64,67,.15);background:#fff;min-height:1086px!important;padding:96px}[_nghost-%COMP%]     .fr-fullscreen div.fr-wrapper{background:#f8f9fa}.tips-container[_ngcontent-%COMP%]{margin-top:20px;border:1px solid #c7c7c7;border-radius:5px;padding:10px;position:relative;font-size:14px}.tips-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.4rem}.close-tips[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;height:12px;cursor:pointer}ul[_ngcontent-%COMP%]{padding:0 16px;margin-top:20px}.count[_ngcontent-%COMP%]{font-size:11px;color:#454545}.card[_ngcontent-%COMP%]{margin:10px 0;cursor:pointer}.draft-card[_ngcontent-%COMP%]{margin-top:10px;border-bottom:2px solid #4264d0;cursor:pointer}.draft-card[_ngcontent-%COMP%]:hover{color:#4264d0}.card[_ngcontent-%COMP%]:hover{border:1px solid #4264d0;background:rgba(66,100,208,.33)}.draft-container[_ngcontent-%COMP%]{width:85%;flex-direction:column;padding:26px;display:flex;align-items:flex-start;justify-content:center;margin:0 auto}.divider[_ngcontent-%COMP%]{height:40%;width:3px;background:#252525;margin:0 15px;border-radius:50px}.type-container[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center;margin:0 auto}.team-helper[_ngcontent-%COMP%]{color:#454545;font-size:12px;display:inline-block;padding-left:15px}.delete-option-t[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.delete-option[_ngcontent-%COMP%], .delete-option-t[_ngcontent-%COMP%]{margin-left:10px;cursor:pointer}h5[_ngcontent-%COMP%]{display:flex;align-items:center}.post-img[_ngcontent-%COMP%]{height:30px;width:30px;margin-right:10px}.footer-distributed[_ngcontent-%COMP%]{background-color:#21253c;box-shadow:0 1px 1px 0 rgba(0,0,0,.12);box-sizing:border-box;width:100%;text-align:left;font:normal 16px sans-serif;padding:45px 50px;margin-top:80px}.footer-distributed[_ngcontent-%COMP%]   .footer-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#8f9296;font-size:14px;margin:0}.footer-distributed[_ngcontent-%COMP%]   p.footer-links[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#fff;margin:0 0 10px;padding:0}.footer-distributed[_ngcontent-%COMP%]   p.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;line-height:1.8;text-decoration:none;color:inherit}.footer-distributed[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]{float:right;margin-top:6px;max-width:180px}.footer-distributed[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;width:35px;height:35px;background-color:#33383b;border-radius:2px;font-size:20px;color:#fff;text-align:center;line-height:35px;margin-left:3px}@media (max-width:600px){.footer-distributed[_ngcontent-%COMP%]   .footer-left[_ngcontent-%COMP%], .footer-distributed[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]{text-align:center}.footer-distributed[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]{float:none;margin:0 auto 20px}.footer-distributed[_ngcontent-%COMP%]   .footer-left[_ngcontent-%COMP%]   p.footer-links[_ngcontent-%COMP%]{line-height:1.8}}[_nghost-%COMP%]     a{text-decoration:underline!important}"]}),q),canActivate:[i("RBmT").a],canDeactivate:[(H=function(){function e(t,i){_classCallCheck(this,e),this.authService=t,this.threadService=i}return _createClass(e,[{key:"canDeactivate",value:function(e){return!(this.authService.isLoggedIn()&&!this.threadService.posting)||!e.canDeactivate||e.canDeactivate()}}]),e}(),H.\u0275fac=function(e){return new(e||H)(s.Tb(p.a),s.Tb(g.a))},H.\u0275prov=s.Ib({token:H,factory:H.\u0275fac,providedIn:"root"}),H)]}],V=((X=function e(){_classCallCheck(this,e)}).\u0275mod=s.Kb({type:X}),X.\u0275inj=s.Jb({factory:function(e){return new(e||X)},imports:[[d.j.forChild(Q)],d.j]}),X),G=((U=function e(){_classCallCheck(this,e)}).\u0275mod=s.Kb({type:U}),U.\u0275inj=s.Jb({factory:function(e){return new(e||U)},imports:[[n.b,u.forRoot(),h.forRoot(),o.a,r.g,r.o,V]]}),U)}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{q3iL:function(t,e,i){"use strict";i.r(e),i.d(e,"CreatePostModule",(function(){return U}));var o=i("ofXK"),r=i("PCNd"),s=i("3Pt+"),n=i("fXoL"),a=i("sfw5"),l=i.n(a),h=function(){function t(t,e){this.zone=e,this._opts={immediateAngularModelUpdate:!1,angularIgnoreAttrs:null},this.SPECIAL_TAGS=["img","button","input","a"],this.INNER_HTML_ATTR="innerHTML",this._hasSpecialTag=!1,this._editorInitialized=!1,this._oldModel=null,this.onChange=function(t){},this.onTouched=function(){},this.froalaModelChange=new n.n,this.froalaInit=new n.n;var i=t.nativeElement;-1!=this.SPECIAL_TAGS.indexOf(i.tagName.toLowerCase())&&(this._hasSpecialTag=!0),this._element=i,this.zone=e}var e;return e=t,t.prototype.writeValue=function(t){this.updateEditor(t)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},Object.defineProperty(t.prototype,"froalaEditor",{set:function(t){this._opts=t||this._opts},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"froalaModel",{set:function(t){this.updateEditor(t)},enumerable:!0,configurable:!0}),t.prototype.updateEditor=function(t){JSON.stringify(this._oldModel)!=JSON.stringify(t)&&(this._hasSpecialTag?this._model=t:this._oldModel=t,this._editorInitialized?this._hasSpecialTag?this.setContent():this._editor.html.set(t):this._hasSpecialTag?this.setContent():this._element.innerHTML=t||"")},t.prototype.updateModel=function(){var t=this;this.zone.run((function(){var e=null;if(t._hasSpecialTag){for(var i=t._element.attributes,o={},r=0;r<i.length;r++){var s=i[r].name;t._opts.angularIgnoreAttrs&&-1!=t._opts.angularIgnoreAttrs.indexOf(s)||(o[s]=i[r].value)}t._element.innerHTML&&(o[t.INNER_HTML_ATTR]=t._element.innerHTML),e=o}else{var n=t._editor.html.get();"string"==typeof n&&(e=n)}t._oldModel!==e&&(t._oldModel=e,t.froalaModelChange.emit(e),t.onChange(e))}))},t.prototype.registerEvent=function(t,e){t&&e&&(this._opts.events||(this._opts.events={}),this._opts.events[t]=e)},t.prototype.initListeners=function(){var t=this;this._editor.events&&(this._editor.events.on("contentChanged",(function(){setTimeout((function(){t.updateModel()}),0)})),this._editor.events.on("mousedown",(function(){setTimeout((function(){t.onTouched()}),0)})),this._opts.immediateAngularModelUpdate&&this._editor.events.on("keyup",(function(){setTimeout((function(){t.updateModel()}),0)}))),this._editorInitialized=!0},t.prototype.createEditor=function(){var t=this;this._editorInitialized||(this.setContent(!0),this.zone.runOutsideAngular((function(){t._opts.events||(t._opts.events={}),t.registerEvent("initialized",t._opts.events&&t._opts.events.initialized);var e=t._opts.events.initialized;t._opts.events.initialized&&t._opts.events.initialized.overridden||(t._opts.events.initialized=function(){t.initListeners(),e&&e.call(t._editor,t)},t._opts.events.initialized.overridden=!0),t._editor=new l.a(t._element,t._opts)})))},t.prototype.setHtml=function(){this._editor.html.set(this._model||""),this._editor.undo.reset(),this._editor.undo.saveStep()},t.prototype.setContent=function(t){void 0===t&&(t=!1);var e=this;if(this._model||""==this._model)if(this._oldModel=this._model,this._hasSpecialTag){var i=this._model;if(i){for(var o in i)i.hasOwnProperty(o)&&o!=this.INNER_HTML_ATTR&&this._element.setAttribute(o,i[o]);i.hasOwnProperty(this.INNER_HTML_ATTR)&&(this._element.innerHTML=i[this.INNER_HTML_ATTR])}}else t?this.registerEvent("initialized",(function(){e.setHtml()})):e.setHtml()},t.prototype.destroyEditor=function(){this._editorInitialized&&(this._editor.destroy(),this._editorInitialized=!1)},t.prototype.getEditor=function(){return this._element?this._editor:null},t.prototype.generateManualController=function(){var t={initialize:this.createEditor.bind(this),destroy:this.destroyEditor.bind(this),getEditor:this.getEditor.bind(this)};this.froalaInit.emit(t)},t.prototype.ngAfterViewInit=function(){this.froalaInit.observers.length?this.generateManualController():this.createEditor()},t.prototype.ngOnDestroy=function(){this.destroyEditor()},t.\u0275fac=function(e){return new(e||t)(n.Mb(n.l),n.Mb(n.z))},t.\u0275dir=n.Hb({type:t,selectors:[["","froalaEditor",""]],inputs:{froalaEditor:"froalaEditor",froalaModel:"froalaModel"},outputs:{froalaModelChange:"froalaModelChange",froalaInit:"froalaInit"},exportAs:["froalaEditor"],features:[n.Ab([{provide:s.i,useExisting:Object(n.T)((function(){return e})),multi:!0}])]}),t}(),c=function(){function t(){}var e;return e=t,t.forRoot=function(){return{ngModule:e,providers:[]}},t.\u0275mod=n.Kb({type:t}),t.\u0275inj=n.Jb({factory:function(e){return new(e||t)}}),t}(),u=function(){function t(){}var e;return e=t,t.forRoot=function(){return{ngModule:e,providers:[]}},t.\u0275mod=n.Kb({type:t}),t.\u0275inj=n.Jb({factory:function(e){return new(e||t)}}),t}(),d=i("tyNb"),p=i("8PDw"),g=i("fQFj");function m(t,e){1&t&&(n.ac(),n.Pb(0,"svg",52),n.Nb(1,"path",53),n.Nb(2,"path",54),n.Ob())}function f(t,e){1&t&&(n.ac(),n.Pb(0,"svg",55),n.Nb(1,"path",53),n.Ob())}function b(t,e){1&t&&(n.ac(),n.Pb(0,"svg",56),n.Nb(1,"path",57),n.Ob())}function v(t,e){1&t&&(n.ac(),n.Pb(0,"svg",58),n.Nb(1,"rect",59),n.Nb(2,"rect",60),n.Nb(3,"rect",61),n.Ob())}function O(t,e){1&t&&n.Nb(0,"div",62)}function M(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div",63),n.Xb("click",(function(){return n.mc(t),n.bc(2).selectDraft()})),n.Pb(1,"button"),n.Pb(2,"span",64),n.sc(3,"Drafts"),n.Ob(),n.Pb(4,"span",65),n.sc(5,"1"),n.Ob(),n.Ob(),n.Ob()}}function P(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div",42),n.Pb(1,"div",43),n.Pb(2,"button",44),n.Xb("click",(function(e){return n.mc(t),n.bc().changeType("text",e)})),n.rc(3,m,3,0,"svg",45),n.rc(4,f,2,0,"svg",46),n.sc(5," Text"),n.Ob(),n.Pb(6,"button",47),n.Xb("click",(function(e){return n.mc(t),n.bc().changeType("poll",e)})),n.rc(7,b,2,0,"svg",48),n.rc(8,v,4,0,"svg",49),n.sc(9," Poll"),n.Ob(),n.Ob(),n.rc(10,O,1,0,"div",50),n.rc(11,M,6,0,"div",51),n.Ob()}if(2&t){const t=n.bc();n.Bb(2),n.Db("active","text"==t.type),n.Bb(1),n.hc("ngIf","text"==t.type),n.Bb(1),n.hc("ngIf","poll"==t.type),n.Bb(2),n.Db("active","poll"==t.type),n.Bb(1),n.hc("ngIf","text"==t.type),n.Bb(1),n.hc("ngIf","poll"==t.type),n.Bb(2),n.hc("ngIf",t.draft),n.Bb(1),n.hc("ngIf",t.draft)}}function S(t,e){if(1&t){const t=n.Qb();n.Pb(0,"button",66),n.Xb("click",(function(){return n.mc(t),n.bc().saveDraft()})),n.sc(1,"Save draft"),n.Ob()}}function T(t,e){1&t&&(n.Pb(0,"div",67),n.Pb(1,"span",68),n.sc(2,"Posting..."),n.Ob(),n.Ob())}function x(t,e){if(1&t){const t=n.Qb();n.Pb(0,"button",69),n.Xb("click",(function(){return n.mc(t),n.bc().saveChanges()})),n.sc(1,"Save changes"),n.Ob()}}function y(t,e){if(1&t){const t=n.Qb();n.Pb(0,"button",69),n.Xb("click",(function(){return n.mc(t),n.bc().submit()})),n.sc(1,"Post"),n.Ob()}}function C(t,e){1&t&&(n.Pb(0,"div",70),n.Pb(1,"span"),n.sc(2,"You can't edit poll options"),n.Ob(),n.Ob())}function _(t,e){if(1&t){const t=n.Qb();n.Pb(0,"span",80),n.Xb("click",(function(){n.mc(t);const e=n.bc().index;return n.bc(2).deleteOption(e)})),n.sc(1,"x"),n.Ob()}}function w(t,e){if(1&t&&(n.Pb(0,"div",73),n.Pb(1,"div",74),n.Pb(2,"label",75),n.Pb(3,"span",76),n.sc(4),n.Ob(),n.Ob(),n.Pb(5,"div",77),n.Nb(6,"input",78),n.Ob(),n.rc(7,_,2,0,"span",79),n.Ob(),n.Ob()),2&t){const t=e.index;n.Bb(1),n.hc("formGroupName",t),n.Bb(3),n.tc(t+1),n.Bb(2),n.Cb("maxlength",30),n.Bb(1),n.hc("ngIf",t>1)}}function I(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div",81),n.Pb(1,"button",82),n.Xb("click",(function(){return n.mc(t),n.bc(2).addOption()})),n.sc(2,"Add another option"),n.Ob(),n.Ob()}}function F(t,e){if(1&t&&(n.Pb(0,"div",15),n.rc(1,w,8,4,"div",71),n.rc(2,I,3,0,"div",72),n.Ob()),2&t){const t=n.bc();n.Bb(1),n.hc("ngForOf",t.formData.controls),n.Bb(1),n.hc("ngIf","poll"==t.type)}}function k(t,e){if(1&t&&(n.Pb(0,"option",89),n.sc(1),n.Ob()),2&t){const t=e.$implicit;n.hc("value",t.teamName),n.Bb(1),n.uc("",t.teamName," ")}}function B(t,e){if(1&t){const t=n.Qb();n.Pb(0,"span",90),n.Xb("click",(function(){n.mc(t);const e=n.bc().index;return n.bc(2).deleteOptionT(e)})),n.sc(1,"Delete"),n.Ob()}}function E(t,e){if(1&t&&(n.Pb(0,"div",84),n.Pb(1,"div",74),n.Pb(2,"label",16),n.sc(3,"Team (optional)"),n.Ob(),n.Pb(4,"div",85),n.Pb(5,"select",86),n.rc(6,k,2,2,"option",87),n.Ob(),n.Ob(),n.rc(7,B,2,0,"span",88),n.Ob(),n.Ob()),2&t){const t=e.index,i=n.bc(2);n.Bb(1),n.hc("formGroupName",t),n.Bb(5),n.hc("ngForOf",i.teams),n.Bb(1),n.hc("ngIf",i.formDataT.controls[0].value.postTeam.length)}}function A(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div",15),n.rc(1,E,8,3,"div",83),n.Pb(2,"div",81),n.Pb(3,"button",82),n.Xb("click",(function(){return n.mc(t),n.bc().addOptionT()})),n.sc(4,"Add another team"),n.Ob(),n.Ob(),n.Ob()}if(2&t){const t=n.bc();n.Bb(1),n.hc("ngForOf",t.formDataT.controls)}}function N(t,e){1&t&&(n.Pb(0,"div",70),n.Pb(1,"span"),n.sc(2,"You can't edit the cover image"),n.Ob(),n.Ob())}function z(t,e){1&t&&(n.Pb(0,"div",97),n.sc(1," The image is of low quality. We recommend you to select another image "),n.Ob())}function R(t,e){if(1&t){const t=n.Qb();n.Pb(0,"button",98),n.Xb("click",(function(){return n.mc(t),n.bc(2).deletePicture()})),n.sc(1,"Delete"),n.Ob()}}function L(t,e){1&t&&(n.Pb(0,"label",99),n.Nb(1,"img",100),n.Ob())}function j(t,e){if(1&t&&(n.Pb(0,"div",101),n.Nb(1,"img",102),n.Ob()),2&t){const t=n.bc(2);n.Bb(1),n.hc("src",t.threadPicture,n.oc)}}function D(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div"),n.Pb(1,"span",91),n.sc(2,"Cover Image"),n.Ob(),n.rc(3,z,2,0,"div",92),n.rc(4,R,2,0,"button",93),n.Pb(5,"div"),n.Pb(6,"input",94),n.Xb("change",(function(e){return n.mc(t),n.bc().onChange(e)})),n.Ob(),n.rc(7,L,2,0,"label",95),n.rc(8,j,2,1,"div",96),n.Ob(),n.Ob()}if(2&t){const t=n.bc();n.Bb(3),n.hc("ngIf",t.lowQuality),n.Bb(1),n.hc("ngIf",t.threadPicture),n.Bb(3),n.hc("ngIf",!t.threadPicture),n.Bb(1),n.hc("ngIf",t.threadPicture)}}function W(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div",103),n.Pb(1,"img",104),n.Xb("click",(function(){return n.mc(t),n.bc().closeTips()})),n.Ob(),n.Pb(2,"span",105),n.sc(3,"Some tips"),n.Ob(),n.Pb(4,"ul"),n.Pb(5,"li"),n.sc(6,'To embed media from Youtube, Instagram, etc. click the "More Rich" button and then select "Embed URL"'),n.Ob(),n.Pb(7,"li"),n.sc(8,"Images are used to support your written content. Every image needs to add something to the post, it shouldn't just be there for decoration."),n.Ob(),n.Pb(9,"li"),n.sc(10,"Tables come in handy when exposing data or stats."),n.Ob(),n.Pb(11,"li"),n.sc(12,'To add subheadings to your posts, click the "More Paragraph" button, then click "Paragraph Format" and select the "Subheading" option.'),n.Ob(),n.Ob(),n.Ob()}}const H=[{path:"",component:(()=>{class t{constructor(t,e,i,o,r,s,n){this.router=t,this.authService=e,this.formBuilder=i,this.route=o,this.location=r,this.platformId=s,this.threadService=n,this.fullscreen=!1,this.showTips=!1,this.posting=!1,this.editing=!1,this.errorMessage=null,this.stepOneCompleted=!1,this.type="text",this.selection="",this.url="",this.league="",this.count=120,this.title="",this.description="",this.max=120,this.pollValue="",this.testW="asdasd",this.test="",this.countDescription=300,this.loadingTeams=!1,this.draft=!1,this.options=[],this.teams=[],this.editorContent="",this.teamsAvailable=!0,this.lowQuality=!1,this.optionsFroala={key:"re1H1qA3A2C7B6A5D5hqJ-7dD-17lihhuH-8xalgE4gjkH-8D1B3D3E2E6D1G2B4E4E3==",placeholderText:"Your \u{1f525} post goes here",charCounterCount:!0,imageEditButtons:["imageReplace","imageCaption","imageRemove"],imageDefaultDisplay:"block",imageDefaultAlign:"center",linkAlwaysBlank:!0,pastePlain:!0,embedlyKey:"116e3e2241ba42e49a5d9091d51206dd",imageResize:!1,attribution:!1,videoMaxSize:33554432,listAdvancedTypes:!1,fontSizeDefaultSelection:18,videoAllowedTypes:["mp4","ogg","mov"],imageAllowedTypes:["jpeg","jpg","png"],videoInsertButtons:["videoBack","|","videoUpload"],imageInsertButtons:["imageBack","|","imageUpload"],linkEditButtons:["linkOpen","linkEdit","linkRemove"],heightMin:300,toolbarStickyOffset:55,paragraphFormat:{N:"Normal",H5:"Subheading"},tableEditButtons:["tableHeader","tableRemove","|","tableRows","tableColumns","-","tableCells","tableCellHorizontalAlign"],toolbarButtons:{moreText:{buttons:["bold","italic","strikeThrough","superscript","clearFormatting"]},moreParagraph:{buttons:["alignLeft","alignCenter","formatOLSimple","formatOL","formatUL","quote","paragraphFormat",""]},moreRich:{buttons:["insertLink","insertImage","insertVideo","insertTable","embedly"]},moreMisc:{buttons:["undo","redo","fullscreen","selectAll"],align:"right",buttonsVisible:2}},events:{"video.codeError":t=>{},"video.loaded":t=>{this.captureImage(t[0].children[0])},"commands.after":(t,e,i)=>{"fullscreen"==t&&(this.fullscreen=!this.fullscreen)},"image.error":(t,e)=>{4==t.code&&this.saveDraftForError()},"image.removed":t=>{let e=t[0].src.substr(50);this.threadService.deleteS3(e).subscribe(t=>{},t=>{})}}}}get formData(){return this.stepOneForm.get("options")}get formDataT(){return this.stepOneForm.get("postTeams")}ngOnDestroy(){this.threadService.threadToEdit=void 0}captureImage(t){if(Object(o.o)(this.platformId)){var e=document.createElement("canvas"),i=document.createElement("video");i.setAttribute("crossorigin","anonymous"),i.setAttribute("controls",""),i.setAttribute("style","width:600px"),i.setAttribute("class","fr-draggable"),i.src=t.src,i.addEventListener("loadedmetadata",()=>{e.width=i.videoWidth,e.height=i.videoHeight,i.currentTime=2,i.addEventListener("timeupdate",()=>{e.getContext("2d").drawImage(i,0,0,e.width,e.height);var o=e.toDataURL();fetch(o).then(t=>t.blob()).then(e=>this.getSignedRequestPoster(i,e,t))})})}}canDeactivate(){return 1==confirm("Do you want to discard your post")&&(this.type="",this.initControls.destroy(),!0)}ngOnInit(){if(Object(o.o)(this.platformId)){this.threadService.posting=!1,localStorage.getItem("tipsnew")||(this.showTips=!0);var t=localStorage.getItem("draft");if(t&&(this.threadService.draftInitial=JSON.parse(t),this.draft=!0),this.threadService.threadToEdit){let t,e,i=this.threadService.threadToEdit;switch(i.type){case"Poll":this.type="poll";break;case"General":this.type="text";break;case"Link":this.type="link"}this.editorContent=i.description,i.pollValues&&(t=i.pollValues.map(t=>this.formBuilder.group({pollOption:t}))),this.buildForm(i.league,i.title,i.url,t,e),this.wordCount(),i.teams.length&&this.getTeams(i,!0)}else{this.buildForm();let t=this.route.snapshot.queryParamMap.get("type");this.type=t||"text"}}}changeType(t,e){e.stopPropagation(),this.type=t}selectDraft(){this.editorContent=this.threadService.draftInitial.content,this.threadService.draftInitial.league&&this.stepOneForm.controls.league.setValue(this.threadService.draftInitial.league),this.threadService.draftInitial.title&&this.stepOneForm.controls.title.setValue(this.threadService.draftInitial.title),this.threadService.draftInitial.url&&this.stepOneForm.controls.url.setValue(this.threadService.draftInitial.url),this.threadService.draftInitial.options.length&&(this.threadService.draftInitial.options=this.threadService.draftInitial.options.map(t=>this.formBuilder.group({pollOption:t.pollOption})),this.stepOneForm.setControl("options",this.formBuilder.array(this.threadService.draftInitial.options))),this.threadService.draftInitial.options.length&&(this.threadService.draftInitial.options=this.threadService.draftInitial.options.map(t=>this.formBuilder.group({pollOption:t.pollOption})),this.stepOneForm.setControl("options",this.formBuilder.array(this.threadService.draftInitial.options))),this.wordCount(),this.threadService.draftInitial.teams.length&&this.getTeams(this.threadService.draftInitial,!0),this.type=this.threadService.draftInitial.type,this.draft=!1}closeTips(){Object(o.o)(this.platformId)&&(localStorage.setItem("tipsnew","viewed"),this.showTips=!1)}buildForm(t,e,i,o,r){o&&(o=o.map(t=>this.formBuilder.group({pollOption:t.pollOption}))),this.stepOneForm=this.formBuilder.group({league:[t||"",[s.q.required]],title:[e||"",[s.q.required]],url:[i||""],options:this.formBuilder.array(o||[this.createItem(),this.createItem()]),postTeams:this.formBuilder.array(r||[this.createItemT()])})}saveDraftForError(){let t,e=this.stepOneForm.get("postTeams").value;e=e.filter(t=>t.postTeam.length),t=e.length?e.map(t=>this.teams.find(e=>e.teamName==t.postTeam)._id):[];let i={content:this.editorContent||this.initControls.getEditor().html.get(),title:this.stepOneForm.get("title").value||"My Draft",league:this.stepOneForm.get("league").value,url:this.stepOneForm.get("url").value,options:this.stepOneForm.get("options").value,teams:t,type:this.type};Object(o.o)(this.platformId)&&localStorage.setItem("draft",JSON.stringify(i)),this.authService.successMessage="Your draft has been saved",setTimeout(()=>{this.authService.successMessage=null},3e3),this.router.navigateByUrl("/")}saveDraft(){console.log(this.initControls.getEditor().html.get());let t,e=this.stepOneForm.get("postTeams").value;if(e=e.filter(t=>t.postTeam.length),t=e.length?e.map(t=>this.teams.find(e=>e.teamName==t.postTeam)._id):[],this.stepOneForm.get("title").value){if(Object(o.o)(this.platformId))if(localStorage.getItem("draft")){if(1==confirm("Your previous draft will be deleted")){let e={content:this.editorContent||this.initControls.getEditor().html.get(),title:this.stepOneForm.get("title").value,league:this.stepOneForm.get("league").value,url:this.stepOneForm.get("url").value,teams:t,options:"poll"==this.type?this.stepOneForm.get("options").value:[],type:this.type};localStorage.setItem("draft",JSON.stringify(e)),this.authService.successMessage="Your draft has been saved",setTimeout(()=>{this.authService.successMessage=null},3e3)}}else{let e={content:this.editorContent||this.initControls.getEditor().html.get(),title:this.stepOneForm.get("title").value,league:this.stepOneForm.get("league").value,url:this.stepOneForm.get("url").value,teams:t,options:"poll"==this.type?this.stepOneForm.get("options").value:[],type:this.type};localStorage.setItem("draft",JSON.stringify(e)),this.authService.successMessage="Your draft has been saved",setTimeout(()=>{this.authService.successMessage=null},3e3)}}else this.authService.errorMessage="You must add a title to your post before saving it",setTimeout(()=>{this.authService.errorMessage=null},5e3)}url_domain(t){if(Object(o.o)(this.platformId)){var e=document.createElement("a");return e.href=t,e.hostname}}initialize(t){this.initControls=t,this.threadService.getSignedRequestFroala().subscribe(t=>{this.optionsFroala.imageUploadToS3=t,this.optionsFroala.videoUploadToS3=t,this.initControls.initialize()},t=>{this.authService.successMessage="Something went wrong! Please try again later",setTimeout(()=>{this.authService.successMessage=null},3e3),this.location.back()})}createItemT(){return this.formBuilder.group({postTeam:""})}createItem(){return this.formBuilder.group({pollOption:""})}onChangePoster(){}onChange(t){let e=t.target.files;if(this.file=e[0],this.fileThumbnail=e[0],this.fileWeb=e[0],this.fileType=this.file.type,this.fileTypeWeb=this.file.type,this.fileTypeThumbnail=this.fileType,this.fileName=this.authService.randomString(7)+this.authService.currentUser.username+"."+this.file.type.split("/")[1],this.fileNameThumbnail=this.authService.randomString(7)+"-thumb"+this.authService.currentUser.username+"."+this.file.type.split("/")[1],this.fileNameWeb=this.authService.randomString(7)+"-web"+this.authService.currentUser.username+"."+this.file.type.split("/")[1],!e[0].name.match(/.(jpg|jpeg|png)$/i))return this.authService.errorMessage=".webp format is not supported, please use another format (.jpg, .jpeg, or .png)",void setTimeout(()=>{this.authService.errorMessage=null},5e3);if(FileReader&&e&&e.length){var i=new FileReader;i.onload=()=>{this.threadPicture=i.result},i.readAsDataURL(e[0])}loadImage(this.file,t=>{"error"===t.type?(this.authService.errorMessage="Error loading image, please try again with another one",setTimeout(()=>{this.authService.errorMessage=null},3e3)):(this.lowQuality=t.width<400,t.toBlob(t=>{this.file=t,loadImage(this.fileThumbnail,t=>{"error"===t.type?(this.authService.errorMessage="Error loading image, please try again with another one",setTimeout(()=>{this.authService.errorMessage=null},3e3)):t.toBlob(t=>{this.fileThumbnail=t,loadImage(this.fileWeb,t=>{"error"===t.type?(this.authService.errorMessage="Error loading image, please try again with another one",setTimeout(()=>{this.authService.errorMessage=null},3e3)):t.toBlob(t=>{this.fileWeb=t},this.fileType)},{maxWidth:1500,orientation:!0})},this.fileType)},{maxWidth:200,orientation:!0})},this.fileType))},{maxWidth:800,orientation:!0}),null==this.file&&(this.authService.errorMessage="No file selected",setTimeout(()=>{this.authService.errorMessage=null},3e3))}deletePicture(){this.file=void 0,this.fileType=void 0,this.fileName=void 0,this.threadPicture=void 0,this.lowQuality=!1}wordCount(){this.count=this.max-this.stepOneForm.get("title").value.length}goBack(){this.location.back()}addOption(){this.optionsForm=this.stepOneForm.get("options"),this.optionsForm.length<6?this.optionsForm.push(this.createItem()):(this.authService.errorMessage="You have reached the maximum number of options for your poll",setTimeout(()=>{this.authService.errorMessage=null},4e3))}addOptionT(){this.postTeamsForm=this.stepOneForm.get("postTeams"),this.postTeamsForm.push(this.createItemT())}deleteOption(t){this.optionsForm=this.stepOneForm.get("options"),this.optionsForm.removeAt(t)}deleteOptionT(t){t>0?(this.postTeamsForm=this.stepOneForm.get("postTeams"),this.postTeamsForm.removeAt(t)):this.stepOneForm.setControl("postTeams",this.formBuilder.array([this.createItemT()]))}onTeamChange(t){let e={league:t.target.value};this.postTeamsForm=this.stepOneForm.get("postTeams");for(let i=0;i<this.postTeamsForm.length;i++)this.postTeamsForm.removeAt(i);this.stepOneForm.setControl("postTeams",this.formBuilder.array([this.createItemT()])),this.getTeams(e,!1)}getTeams(t,e){this.authService.getAllTeams(t.league).subscribe(i=>{if(this.teamsAvailable=0!=i.length,i.sort((t,e)=>t.teamName>e.teamName?1:-1),this.teams=i,e&&t.teams[0].length){let e;e=t.teams.map(t=>{let e=i.find(e=>e._id==t).teamName;return this.formBuilder.group({postTeam:e})}),this.postTeamsForm=this.stepOneForm.get("postTeams"),this.stepOneForm.setControl("postTeams",this.formBuilder.array(e))}},t=>{this.loadingTeams=!1,this.authService.errorMessage="Error loading teams, please try again later",setTimeout(()=>{this.authService.errorMessage=null},5e3)})}getSignedRequest(t,e,i,o){this.threadService.getSignedRequest(this.fileName,this.fileType).subscribe(t=>{this.signedRequestAWS=t.signedRequest,this.urlAWS=t.url,this.threadService.getSignedRequest(this.fileNameThumbnail,this.fileTypeThumbnail).subscribe(t=>{this.signedRequestThumbnailAWS=t.signedRequest,this.urlThumbnailAWS=t.url,this.threadService.getSignedRequest(this.fileNameWeb,this.fileTypeWeb).subscribe(t=>{this.signedRequestWebAWS=t.signedRequest,this.urlWebAWS=t.url,this.uploadFile(this.file,this.signedRequestAWS,this.urlAWS,e,this.fileThumbnail,this.signedRequestThumbnailAWS,this.urlThumbnailAWS,this.fileWeb,this.signedRequestWebAWS,this.urlWebAWS)},t=>{this.authService.errorMessage=t,setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1})},t=>{this.authService.errorMessage=t,setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1})},t=>{this.authService.errorMessage=t,setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1})}uploadFile(t,e,i,r,s,n,a,l,h,c){this.authService.uploadFile(e,t).subscribe(()=>{this.authService.uploadFile(n,s).subscribe(()=>{this.authService.uploadFile(h,l).subscribe(()=>{let t=i.replace(/\s+/g,"+");r.picture=t;let e=a.replace(/\s+/g,"+");r.thumbnail=e;let s=c.replace(/\s+/g,"+");r.webPicture=s,this.url?this.threadService.newLinkThread(r).subscribe(({thread:t,error:e})=>{t?(this.threadService.posting=!0,Object(o.o)(this.platformId)&&localStorage.setItem("draft",""),this.router.navigateByUrl("/")):(this.authService.errorMessage=e,setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1)},t=>{this.authService.errorMessage=t,setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1}):this.threadService.newThread(r).subscribe(({thread:t,error:e})=>{t?(this.threadService.posting=!0,Object(o.o)(this.platformId)&&localStorage.setItem("draft",""),this.router.navigateByUrl("/")):(this.authService.errorMessage=e,setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1)},t=>{this.authService.errorMessage=t,setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1})})},t=>{this.authService.errorMessage=t,setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1})},t=>{this.authService.errorMessage=t,setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1})}getSignedRequestPoster(t,e,i){let o=this.authService.randomString(7)+this.authService.currentUser.username+".png";this.threadService.getSignedRequest(o,"image/png").subscribe(o=>{this.uploadFilePoster(o.signedRequest,e,t,o.url,i)},t=>{this.authService.errorMessage=t,setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1})}uploadFilePoster(t,e,i,o,r){this.authService.uploadFile(t,e).subscribe(()=>{let t=o.replace(/\s+/g,"+");i.poster=t,r.parentNode.replaceChild(i,r)},t=>{this.authService.errorMessage=t,setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1})}saveChanges(){this.league=this.stepOneForm.get("league").value,this.title=this.stepOneForm.get("title").value,this.url=this.stepOneForm.get("url").value,this.description=this.editorContent||this.initControls.getEditor().html.get();let t=this.stepOneForm.get("postTeams").value;if(this.teamsMapped=t.map(t=>t.postTeam),this.teamsMapped=this.teamsMapped[0].length?this.teamsMapped.map(t=>this.teams.find(e=>e.teamName==t)._id):null,this.editing=!0,"link"!=this.type){if(this.initControls.getEditor().charCounter.count()<600)return this.authService.errorMessage="The post must have at least 600 characters.",setTimeout(()=>{this.authService.errorMessage=null},3e3),void(this.editing=!1);if(!this.title)return this.authService.errorMessage="Please add a title",setTimeout(()=>{this.authService.errorMessage=null},3e3),void(this.editing=!1)}this.threadService.edit(this.threadService.threadToEdit._id,{userId:this.authService.currentUser._id,league:this.league,title:this.title,description:"url"==this.type?void 0:this.description,url:this.url?this.url:void 0,teams:null!=this.teamsMapped?this.teamsMapped:[]}).subscribe(t=>{this.editing=!1,this.threadService.posting=!0,Object(o.o)(this.platformId)&&localStorage.setItem("draft",""),this.threadService.threadToEditOriginal.league=this.league,this.threadService.threadToEditOriginal.title=this.title,this.threadService.threadToEditOriginal.teams=null!=this.teamsMapped?this.teamsMapped:[],this.threadService.threadToEditOriginal.url=this.url?this.url:void 0,this.threadService.threadToEditOriginal.description="url"==this.type?void 0:this.description,this.location.back()},t=>{this.authService.errorMessage="The post must have at least 800 characters.",setTimeout(()=>{this.authService.errorMessage=null},3e3),this.editing=!1})}submit(){this.posting=!0,this.league=this.stepOneForm.get("league").value,this.title=this.stepOneForm.get("title").value,this.url=this.stepOneForm.get("url").value,this.description=this.editorContent||this.initControls.getEditor().html.get();let t=this.stepOneForm.get("options").value,e=this.stepOneForm.get("postTeams").value;if(this.options=t.map(t=>t.pollOption),this.teamsMapped=e.map(t=>t.postTeam),this.teamsMapped=this.teamsMapped.filter(t=>t.length),this.teamsMapped=this.teamsMapped.length&&this.teamsMapped[0].length?this.teamsMapped.map(t=>this.teams.find(e=>e.teamName==t)._id):null,"text"==this.type){if(this.initControls.getEditor().charCounter.count()<300)return this.authService.errorMessage="The post must have at least 300 characters.",setTimeout(()=>{this.authService.errorMessage=null},3e3),void(this.posting=!1);if(this.title&&this.description&&this.league){let t={title:this.title,description:this.description,league:this.league,type:"General",fromWeb:!0,teams:null!=this.teamsMapped?this.teamsMapped:void 0};this.file?this.getSignedRequest(this.file,t,this.fileThumbnail,this.fileWeb):this.threadService.newThread(t).subscribe(({thread:t,error:e})=>{t?(this.threadService.posting=!0,Object(o.o)(this.platformId)&&localStorage.setItem("draft",""),this.router.navigateByUrl("/")):(this.authService.errorMessage=e,setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1)},t=>{this.authService.errorMessage=t,setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1})}else this.title?(this.authService.errorMessage="Please select a feed",setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1):(this.authService.errorMessage="Please enter a title",setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1)}else if("poll"==this.type){if(this.initControls.getEditor().charCounter.count()<300)return this.authService.errorMessage="The post must have at least 300 characters.",setTimeout(()=>{this.authService.errorMessage=null},5e3),void(this.posting=!1);if(this.title&&this.description&&this.league&&this.options.length>=2&&this.authService.isLoggedIn()){for(let e=0;e<this.options.length;e++){const t=this.options[e];if(t.length<=1)return this.authService.errorMessage="Polls must containt at least 2 options",setTimeout(()=>{this.authService.errorMessage=null},5e3),void(this.posting=!1);0==t.length&&this.options.splice(e,1)}let t={title:this.title,description:this.description,pollValues:this.options,league:this.league,type:"Poll",fromWeb:!0,teams:null!=this.teamsMapped?this.teamsMapped:void 0};this.file?this.getSignedRequest(this.file,t,this.fileThumbnail,this.fileWeb):this.threadService.newThread(t).subscribe(({thread:t,error:e})=>{t?(this.threadService.posting=!0,Object(o.o)(this.platformId)&&localStorage.setItem("draft",""),this.router.navigateByUrl("/")):(this.authService.errorMessage=e,setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1)},t=>{this.authService.errorMessage=t,setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1})}else this.title?this.league?(this.authService.errorMessage="Missing fields",setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1):(this.authService.errorMessage="Please select a feed to post",setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1):(this.authService.errorMessage="Please enter a title",setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1)}else if(this.title&&this.url&&this.authService.isLoggedIn()&&this.league){/^((http|https|ftp):\/\/)/.test(this.url)||(this.url="http://"+this.url);let t={titleL:this.title,source:this.url_domain(this.url),urlL:this.url,leagueL:this.league,type:"Link",fromWeb:!0,teams:null!=this.teamsMapped?this.teamsMapped:void 0};this.file?this.getSignedRequest(this.file,t,this.fileThumbnail,this.fileWeb):this.threadService.newLinkThread(t).subscribe(({thread:t,error:e})=>{t?(this.threadService.posting=!0,Object(o.o)(this.platformId)&&localStorage.setItem("draft",""),this.router.navigateByUrl("/")):(this.authService.errorMessage=e,setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1)},t=>{this.authService.errorMessage=t,setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1})}else this.title?(this.authService.errorMessage="Please enter a valid url",setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1):(this.authService.errorMessage="Please add a title",setTimeout(()=>{this.authService.errorMessage=null},5e3),this.posting=!1)}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(d.f),n.Mb(p.a),n.Mb(s.c),n.Mb(d.a),n.Mb(o.g),n.Mb(n.B),n.Mb(g.a))},t.\u0275cmp=n.Gb({type:t,selectors:[["app-create-post"]],decls:65,vars:17,consts:[[1,"new-post-container"],[1,"sub-container"],[1,"new-post-text"],["class","drafts",4,"ngIf"],[1,"steps-container"],["type","button","class","btn btn-outline-dark",3,"click",4,"ngIf"],[1,"posting-cont"],["class","spinner-border text-success","role","status",4,"ngIf"],["type","button","class","btn btn-outline-success",3,"click",4,"ngIf"],[1,"main-container"],[1,"froala-container"],[1,"row"],[1,"col-md-9","col-sm-12"],[1,"form-container"],[3,"formGroup"],[1,"form-group","row"],["for","league",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["formControlName","league",1,"form-control",3,"change"],["value","NBA"],["value","NFL"],["value","Soccer"],["value","MLB"],["value","NHL"],["value","NCAAF"],["value","NCAAB"],["value","NFL Fantasy"],["value","MMA"],["value","Boxing"],["value","Tennis"],["value","Golf"],["value","Motorsports"],["value","General"],["for","title",1,"col-sm-2","col-form-label"],[1,"count"],["type","text","spellcheck","true","autocomplete","off","autocapitalize","on","formControlName","title","id","title","placeholder","Enter a title for your post","maxlength","120",1,"form-control",3,"keyup","keydown"],["class","no-poll",4,"ngIf"],["class","form-group row",4,"ngIf"],[3,"froalaEditor","froalaModel","froalaInit","froalaModelChange"],[1,"col-md-3","col-sm-12"],[4,"ngIf"],["class","tips-container",4,"ngIf"],[1,"drafts"],[1,"type-container"],[1,"type-button","text-button",3,"click"],["class","bi bi-file-text","width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["class","bi bi-file","width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],[1,"type-button",3,"click"],["class","bi bi-bar-chart","width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["class","bi bi-bar-chart-fill","width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["class","divider",4,"ngIf"],["class","drafts-container",3,"click",4,"ngIf"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-file-text"],["fill-rule","evenodd","d","M4 1h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2zm0 1a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H4z"],["fill-rule","evenodd","d","M4.5 10.5A.5.5 0 0 1 5 10h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zm0-2A.5.5 0 0 1 5 8h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zm0-2A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zm0-2A.5.5 0 0 1 5 4h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5z"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-file"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-bar-chart"],["fill-rule","evenodd","d","M4 11H2v3h2v-3zm5-4H7v7h2V7zm5-5h-2v12h2V2zm-2-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-2zM6 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm-5 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3z"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-bar-chart-fill"],["width","4","height","5","x","1","y","10","rx","1"],["width","4","height","9","x","6","y","6","rx","1"],["width","4","height","14","x","11","y","1","rx","1"],[1,"divider"],[1,"drafts-container",3,"click"],[1,"draft-text"],[1,"draft-number"],["type","button",1,"btn","btn-outline-dark",3,"click"],["role","status",1,"spinner-border","text-success"],[1,"sr-only"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"no-poll"],["formArrayName","options","class","poll-flex",4,"ngFor","ngForOf"],["id","add-button-item",4,"ngIf"],["formArrayName","options",1,"poll-flex"],[1,"poll-group",3,"formGroupName"],[1,"col-form-label","poll-labels","col-sm-2"],[1,"inner-no"],[1,"poll-values","col-sm-5"],["formControlName","pollOption","type","text","autocapitalize","on","autocomplete","off","id","poll","placeholder","Poll option",1,"form-control"],["class","delete-option",3,"click",4,"ngIf"],[1,"delete-option",3,"click"],["id","add-button-item"],["type","button",1,"btn","btn-outline-dark","btn-sm",3,"click"],["formArrayName","postTeams","class","poll-flex",4,"ngFor","ngForOf"],["formArrayName","postTeams",1,"poll-flex"],[1,"col-sm-8"],["formControlName","postTeam",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["class","delete-option-t",3,"click",4,"ngIf"],[3,"value"],[1,"delete-option-t",3,"click"],[1,"c-label"],["class","low",4,"ngIf"],["type","button","class","btn btn-danger btn-sm",3,"click",4,"ngIf"],["accept","image/*","id","file","type","file",1,"form-control-file","inputfile",3,"change"],["id","label-profile-picture","for","file",4,"ngIf"],["class","image-container",4,"ngIf"],[1,"low"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],["id","label-profile-picture","for","file"],["src","assets/imgs/add.png","alt","",1,"add-pic"],[1,"image-container"],["alt","",1,"thread-pic",3,"src"],[1,"tips-container"],["src","assets/imgs/close.png","alt","",1,"close-tips",3,"click"],[1,"c-label","tips"]],template:function(t,e){1&t&&(n.Pb(0,"div",0),n.Pb(1,"div",1),n.Pb(2,"h1",2),n.sc(3,"New Post"),n.Ob(),n.rc(4,P,12,10,"div",3),n.Pb(5,"div",4),n.rc(6,S,2,0,"button",5),n.Pb(7,"div",6),n.rc(8,T,3,0,"div",7),n.rc(9,x,2,0,"button",8),n.rc(10,y,2,0,"button",8),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(11,"div",9),n.Pb(12,"div",10),n.Pb(13,"div",11),n.Pb(14,"div",12),n.Pb(15,"div",13),n.Pb(16,"form",14),n.Pb(17,"div",15),n.Pb(18,"label",16),n.sc(19,"Feed"),n.Ob(),n.Pb(20,"div",17),n.Pb(21,"select",18),n.Xb("change",(function(t){return e.onTeamChange(t)})),n.Pb(22,"option",19),n.sc(23,"NBA"),n.Ob(),n.Pb(24,"option",20),n.sc(25,"NFL"),n.Ob(),n.Pb(26,"option",21),n.sc(27,"Soccer"),n.Ob(),n.Pb(28,"option",22),n.sc(29,"MLB"),n.Ob(),n.Pb(30,"option",23),n.sc(31,"NHL"),n.Ob(),n.Pb(32,"option",24),n.sc(33,"NCAAF"),n.Ob(),n.Pb(34,"option",25),n.sc(35,"NCAAB"),n.Ob(),n.Pb(36,"option",26),n.sc(37,"NFL Fantasy"),n.Ob(),n.Pb(38,"option",27),n.sc(39,"MMA"),n.Ob(),n.Pb(40,"option",28),n.sc(41,"Boxing"),n.Ob(),n.Pb(42,"option",29),n.sc(43,"Tennis"),n.Ob(),n.Pb(44,"option",30),n.sc(45,"Golf"),n.Ob(),n.Pb(46,"option",31),n.sc(47,"Motorsports"),n.Ob(),n.Pb(48,"option",32),n.sc(49,"General"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(50,"div",15),n.Pb(51,"label",33),n.sc(52,"Title "),n.Pb(53,"span",34),n.sc(54),n.Ob(),n.Ob(),n.Pb(55,"div",17),n.Pb(56,"input",35),n.Xb("keyup",(function(){return e.wordCount()}))("keydown",(function(){return e.wordCount()})),n.Ob(),n.Ob(),n.Ob(),n.rc(57,C,3,0,"div",36),n.rc(58,F,3,2,"div",37),n.rc(59,A,5,1,"div",37),n.Ob(),n.Ob(),n.Pb(60,"div",38),n.Xb("froalaInit",(function(t){return e.initialize(t)}))("froalaModelChange",(function(t){return e.editorContent=t})),n.Ob(),n.Ob(),n.Pb(61,"div",39),n.rc(62,N,3,0,"div",36),n.rc(63,D,9,4,"div",40),n.rc(64,W,13,0,"div",41),n.Ob(),n.Ob(),n.Ob(),n.Ob()),2&t&&(n.Bb(4),n.hc("ngIf",!e.threadService.threadToEdit),n.Bb(2),n.hc("ngIf",!e.threadService.threadToEdit),n.Bb(2),n.hc("ngIf",e.posting),n.Bb(1),n.hc("ngIf",!e.editing&&e.threadService.threadToEdit),n.Bb(1),n.hc("ngIf",!e.posting&&!e.threadService.threadToEdit),n.Bb(6),n.hc("formGroup",e.stepOneForm),n.Bb(38),n.uc("(",e.count,")"),n.Bb(3),n.hc("ngIf",e.threadService.threadToEdit&&"poll"==e.type),n.Bb(1),n.hc("ngIf","poll"==e.type&&!e.threadService.threadToEdit),n.Bb(1),n.hc("ngIf",e.teamsAvailable),n.Bb(1),n.Db("c-full",e.fullscreen),n.hc("froalaEditor",e.optionsFroala)("froalaModel",e.editorContent),n.Bb(2),n.hc("ngIf",e.threadService.threadToEdit),n.Bb(1),n.hc("ngIf",!e.threadService.threadToEdit),n.Bb(1),n.hc("ngIf",e.showTips))},directives:[o.j,s.s,s.k,s.e,s.p,s.j,s.d,s.m,s.r,s.a,s.h,h,o.i,s.b,s.f],styles:["*[_ngcontent-%COMP%]{font-size:1.6rem}.low[_ngcontent-%COMP%]{font-size:1.3rem;background:#e43b3b;color:#fff;padding:10px;border-radius:4px;margin:10px 0}.new-post-container[_ngcontent-%COMP%]{height:80px}.sub-container[_ngcontent-%COMP%]{justify-content:flex-start;height:100%;width:85%;margin:0 auto;max-width:1200px}.posting-cont[_ngcontent-%COMP%], .sub-container[_ngcontent-%COMP%]{align-items:center;display:flex}.posting-cont[_ngcontent-%COMP%]{width:70px;justify-content:center}.inputfile[_ngcontent-%COMP%]{display:none}#add-button-item[_ngcontent-%COMP%]{margin:16px 0}.add-pic[_ngcontent-%COMP%]{height:20px;width:20px;-o-object-fit:contain;object-fit:contain}.back-cont[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:13px;margin-right:10px}.back-cont[_ngcontent-%COMP%]{display:inline-flex;margin-right:40px}#label-profile-picture[_ngcontent-%COMP%], .back-cont[_ngcontent-%COMP%]{align-items:center;justify-content:center;cursor:pointer}#label-profile-picture[_ngcontent-%COMP%]{height:200px;width:200px;margin:20px 0;font-weight:700;display:block;padding:12px 0;display:flex;text-align:center;color:#4264d0;font-size:14px;outline:none;border:2px solid #4264d0;border-radius:20px}.image-container[_ngcontent-%COMP%], .video-container[_ngcontent-%COMP%]{position:relative}.image-container[_ngcontent-%COMP%]   .trash[_ngcontent-%COMP%]{position:absolute;color:#fff;top:10px;right:10px;font-size:25px}.cover-img[_ngcontent-%COMP%]{width:300px;border-radius:5px}#label-profile-picture[_ngcontent-%COMP%]:hover{background:rgba(66,100,208,.33)}.thread-pic[_ngcontent-%COMP%]{width:100%;border-radius:5px;margin-top:20px}.poll-group[_ngcontent-%COMP%]{justify-content:flex-start;margin:10px 0}.inner-no[_ngcontent-%COMP%], .poll-group[_ngcontent-%COMP%]{display:flex;align-items:center}.inner-no[_ngcontent-%COMP%]{background:#4264d0;width:20px;height:20px;justify-content:center;border-radius:50px;padding:13px;font-size:14px;color:#fff}.poll-values[_ngcontent-%COMP%]{width:50%}.poll-flex[_ngcontent-%COMP%]{width:100%}.c-label[_ngcontent-%COMP%]{display:inline-block;padding:5px 0;border-bottom:2px solid #4264d0;font-weight:500;font-size:14px;margin-right:20px}.c-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-container[_ngcontent-%COMP%]{margin-bottom:40px}.main-container[_ngcontent-%COMP%]{background:#fff}.froala-container[_ngcontent-%COMP%]{width:85%;margin:0 auto;padding:50px 0;max-width:1200px}.no-poll[_ngcontent-%COMP%]{font-style:italic}.new-post-text[_ngcontent-%COMP%]{font-weight:700;font-size:30px;font-weight:500!important}button[_ngcontent-%COMP%]{margin:0 5px}.steps[_ngcontent-%COMP%]{margin:0 10px}.drafts[_ngcontent-%COMP%]{margin-left:25px;height:100%}.drafts[_ngcontent-%COMP%], .drafts[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.drafts[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;color:inherit;border:none;padding:0;font:inherit;cursor:pointer;outline:inherit}.drafts[_ngcontent-%COMP%]   .type-button[_ngcontent-%COMP%]{padding:8px 0;color:#7c7c7c;cursor:pointer;font-size:13px;text-transform:uppercase;font-weight:700}.drafts[_ngcontent-%COMP%]   .type-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:5px;font-size:14px}.drafts[_ngcontent-%COMP%]   .text-button[_ngcontent-%COMP%]{margin-right:20px}.drafts[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#4264d0;border-bottom:2px solid #4264d0}.drafts[_ngcontent-%COMP%]   .draft-text[_ngcontent-%COMP%]{font-weight:700;font-size:1.4rem;text-transform:uppercase;color:#4264d0;cursor:pointer}.drafts[_ngcontent-%COMP%]   .draft-number[_ngcontent-%COMP%]{height:18px;width:18px;color:#fff;background:#1c1c1c;display:inline-flex;align-items:center;justify-content:center;font-size:10px;border-radius:5px;margin-left:5px;cursor:pointer}.steps-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:auto}.c-card[_ngcontent-%COMP%]{min-height:160px;border-radius:5px}.tips[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]     h5{font-size:2rem!important}[_nghost-%COMP%]     .fr-box.fr-basic .fr-element{color:#171717;font-size:1.5rem}[_nghost-%COMP%]     .fr-fullscreen div.fr-view{width:816px;margin:10px auto;box-shadow:0 1px 3px 1px rgba(60,64,67,.15);background:#fff;min-height:1086px!important;padding:96px}[_nghost-%COMP%]     .fr-fullscreen div.fr-wrapper{background:#f8f9fa}.tips-container[_ngcontent-%COMP%]{margin-top:20px;border:1px solid #c7c7c7;border-radius:5px;padding:10px;position:relative;font-size:14px}.tips-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.4rem}.close-tips[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;height:12px;cursor:pointer}ul[_ngcontent-%COMP%]{padding:0 16px;margin-top:20px}.count[_ngcontent-%COMP%]{font-size:11px;color:#454545}.card[_ngcontent-%COMP%]{margin:10px 0;cursor:pointer}.draft-card[_ngcontent-%COMP%]{margin-top:10px;border-bottom:2px solid #4264d0;cursor:pointer}.draft-card[_ngcontent-%COMP%]:hover{color:#4264d0}.card[_ngcontent-%COMP%]:hover{border:1px solid #4264d0;background:rgba(66,100,208,.33)}.draft-container[_ngcontent-%COMP%]{width:85%;flex-direction:column;padding:26px;display:flex;align-items:flex-start;justify-content:center;margin:0 auto}.divider[_ngcontent-%COMP%]{height:40%;width:3px;background:#252525;margin:0 15px;border-radius:50px}.type-container[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center;margin:0 auto}.team-helper[_ngcontent-%COMP%]{color:#454545;font-size:12px;display:inline-block;padding-left:15px}.delete-option-t[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.delete-option[_ngcontent-%COMP%], .delete-option-t[_ngcontent-%COMP%]{margin-left:10px;cursor:pointer}h5[_ngcontent-%COMP%]{display:flex;align-items:center}.post-img[_ngcontent-%COMP%]{height:30px;width:30px;margin-right:10px}.footer-distributed[_ngcontent-%COMP%]{background-color:#21253c;box-shadow:0 1px 1px 0 rgba(0,0,0,.12);box-sizing:border-box;width:100%;text-align:left;font:normal 16px sans-serif;padding:45px 50px;margin-top:80px}.footer-distributed[_ngcontent-%COMP%]   .footer-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#8f9296;font-size:14px;margin:0}.footer-distributed[_ngcontent-%COMP%]   p.footer-links[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#fff;margin:0 0 10px;padding:0}.footer-distributed[_ngcontent-%COMP%]   p.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;line-height:1.8;text-decoration:none;color:inherit}.footer-distributed[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]{float:right;margin-top:6px;max-width:180px}.footer-distributed[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;width:35px;height:35px;background-color:#33383b;border-radius:2px;font-size:20px;color:#fff;text-align:center;line-height:35px;margin-left:3px}@media (max-width:600px){.footer-distributed[_ngcontent-%COMP%]   .footer-left[_ngcontent-%COMP%], .footer-distributed[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]{text-align:center}.footer-distributed[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]{float:none;margin:0 auto 20px}.footer-distributed[_ngcontent-%COMP%]   .footer-left[_ngcontent-%COMP%]   p.footer-links[_ngcontent-%COMP%]{line-height:1.8}}[_nghost-%COMP%]     a{text-decoration:underline!important}"]}),t})(),canActivate:[i("RBmT").a],canDeactivate:[(()=>{class t{constructor(t,e){this.authService=t,this.threadService=e}canDeactivate(t){return!(this.authService.isLoggedIn()&&!this.threadService.posting)||!t.canDeactivate||t.canDeactivate()}}return t.\u0275fac=function(e){return new(e||t)(n.Tb(p.a),n.Tb(g.a))},t.\u0275prov=n.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]}];let q=(()=>{class t{}return t.\u0275mod=n.Kb({type:t}),t.\u0275inj=n.Jb({factory:function(e){return new(e||t)},imports:[[d.j.forChild(H)],d.j]}),t})(),U=(()=>{class t{}return t.\u0275mod=n.Kb({type:t}),t.\u0275inj=n.Jb({factory:function(e){return new(e||t)},imports:[[o.b,c.forRoot(),u.forRoot(),r.a,s.g,s.o,q]]}),t})()}}]);
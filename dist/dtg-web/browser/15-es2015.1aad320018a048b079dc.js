(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{uIdp:function(e,t,i){"use strict";i.r(t),i.d(t,"TimelineDetailModule",(function(){return R}));var n=i("ofXK"),r=i("tyNb"),s=i("fXoL"),a=i("8PDw"),o=i("q/xC"),c=i("RDU2"),l=i("ElG+"),b=i("pYYS"),d=i("PFy0"),h=i("cWq/"),m=i("KjWj");const u=["back"];function f(e,t){if(1&e){const e=s.Qb();s.Pb(0,"a"),s.Pb(1,"div",8),s.Xb("click",(function(){return s.mc(e),s.bc().goToPost()})),s.Pb(2,"div",9),s.Pb(3,"span",10),s.sc(4,"POST"),s.Ob(),s.Pb(5,"span",11),s.sc(6),s.Ob(),s.Pb(7,"span",12),s.sc(8),s.Ob(),s.Ob(),s.Pb(9,"div",13),s.Pb(10,"div",14),s.Pb(11,"div",15),s.Pb(12,"button",16),s.ac(),s.Pb(13,"svg",17),s.Pb(14,"g",18),s.Pb(15,"g",19),s.Nb(16,"polygon",20),s.Nb(17,"path",21),s.Ob(),s.Ob(),s.Ob(),s.Zb(),s.Pb(18,"span",22),s.sc(19),s.Ob(),s.Ob(),s.Ob(),s.Pb(20,"div",23),s.Pb(21,"button",16),s.ac(),s.Pb(22,"svg",24),s.Pb(23,"title"),s.sc(24,"comment"),s.Ob(),s.Pb(25,"desc"),s.sc(26,"Created with Sketch."),s.Ob(),s.Pb(27,"g",18),s.Pb(28,"g",25),s.Nb(29,"rect",26),s.Nb(30,"path",27),s.Ob(),s.Ob(),s.Ob(),s.Zb(),s.Pb(31,"span",22),s.sc(32),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob()}if(2&e){const e=s.bc();s.Bb(6),s.tc(null==e.thread?null:e.thread.title),s.Bb(2),s.uc("By ",null==e.thread||null==e.thread.user?null:e.thread.user.username,""),s.Bb(11),s.tc(null==e.thread?null:e.thread.likers.length),s.Bb(13),s.tc(null==e.thread?null:e.thread.replies)}}function g(e,t){if(1&e){const e=s.Qb();s.Pb(0,"a"),s.Pb(1,"div",8),s.Xb("click",(function(){return s.mc(e),s.bc().goToDiscussion()})),s.Pb(2,"div",9),s.Pb(3,"span",10),s.sc(4,"DISCUSSION"),s.Ob(),s.Pb(5,"span",11),s.sc(6),s.Ob(),s.Pb(7,"span",12),s.sc(8),s.Ob(),s.Ob(),s.Pb(9,"div",13),s.Pb(10,"div",14),s.Pb(11,"div",15),s.Pb(12,"button",16),s.ac(),s.Pb(13,"svg",17),s.Pb(14,"g",18),s.Pb(15,"g",19),s.Nb(16,"polygon",20),s.Nb(17,"path",21),s.Ob(),s.Ob(),s.Ob(),s.Zb(),s.Pb(18,"span",22),s.sc(19),s.Ob(),s.Ob(),s.Ob(),s.Pb(20,"div",23),s.Pb(21,"button",16),s.ac(),s.Pb(22,"svg",24),s.Pb(23,"title"),s.sc(24,"comment"),s.Ob(),s.Pb(25,"desc"),s.sc(26,"Created with Sketch."),s.Ob(),s.Pb(27,"g",18),s.Pb(28,"g",25),s.Nb(29,"rect",26),s.Nb(30,"path",27),s.Ob(),s.Ob(),s.Ob(),s.Zb(),s.Pb(31,"span",22),s.sc(32),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob()}if(2&e){const e=s.bc();s.Bb(6),s.tc(e.take.take),s.Bb(2),s.uc("By ",null==e.take||null==e.take.user?null:e.take.user.username,""),s.Bb(11),s.tc(null==e.take?null:e.take.likers.length),s.Bb(13),s.tc(null==e.take?null:e.take.replies)}}function p(e,t){if(1&e&&(s.Pb(0,"a"),s.Pb(1,"div",28),s.Pb(2,"div",9),s.Pb(3,"span",10),s.sc(4,"Trivia"),s.Ob(),s.Pb(5,"span",11),s.sc(6),s.Ob(),s.Ob(),s.Ob(),s.Ob()),2&e){const e=s.bc();s.Bb(6),s.tc(e.trivia.question)}}function w(e,t){if(1&e){const e=s.Qb();s.Pb(0,"div",29),s.Pb(1,"app-timeline-item",30),s.Xb("deleteComment",(function(t){return s.mc(e),s.bc().deleteComment(t)})),s.Ob(),s.Ob()}if(2&e){const e=s.bc();s.Bb(1),s.hc("timeline",e.timeline)("thread",e.thread)("hideReplies",!0)}}function O(e,t){if(1&e){const e=s.Qb();s.Pb(0,"div",29),s.Pb(1,"app-take-timeline-item",31),s.Xb("deleteComment",(function(t){return s.mc(e),s.bc().deleteComment(t)})),s.Ob(),s.Ob()}if(2&e){const e=s.bc();s.Bb(1),s.hc("timeline",e.timeline)("take",e.take)("hideReplies",!0)}}function k(e,t){if(1&e){const e=s.Qb();s.Pb(0,"div",29),s.Pb(1,"app-play-trivia-timeline-item",32),s.Xb("deleteComment",(function(t){return s.mc(e),s.bc().deleteComment(t)})),s.Ob(),s.Ob()}if(2&e){const e=s.bc();s.Bb(1),s.hc("timeline",e.timeline)("trivia",e.trivia)("hideReplies",!0)}}function P(e,t){if(1&e){const e=s.Qb();s.Pb(0,"app-answer-item",36),s.Xb("filterAnswer",(function(t){return s.mc(e),s.bc(2).filterAnswers(t)}))("addAnswer",(function(t){return s.mc(e),s.bc(2).addAnswer(t)}))("imageVisible",(function(){return s.mc(e),s.bc(2).emitterImages()})),s.Ob()}if(2&e){const e=t.$implicit,i=s.bc(2);s.hc("answer",e)("timeline",i.timeline)("thread",i.thread)}}function v(e,t){if(1&e&&(s.Pb(0,"div",33),s.Pb(1,"span",34),s.sc(2,"Replies"),s.Ob(),s.rc(3,P,1,3,"app-answer-item",35),s.Ob()),2&e){const e=s.bc();s.Bb(3),s.hc("ngForOf",e.answers)}}function C(e,t){if(1&e){const e=s.Qb();s.Pb(0,"app-take-answer-item",38),s.Xb("filterAnswer",(function(t){return s.mc(e),s.bc(2).filterAnswers(t)}))("addAnswer",(function(t){return s.mc(e),s.bc(2).addAnswer(t)}))("imageVisible",(function(){return s.mc(e),s.bc(2).emitterImages()})),s.Ob()}if(2&e){const e=t.$implicit,i=s.bc(2);s.hc("answer",e)("timeline",i.timeline)("take",i.take)}}function x(e,t){if(1&e&&(s.Pb(0,"div",33),s.Pb(1,"span",34),s.sc(2,"Replies"),s.Ob(),s.rc(3,C,1,3,"app-take-answer-item",37),s.Ob()),2&e){const e=s.bc();s.Bb(3),s.hc("ngForOf",e.answers)}}function _(e,t){if(1&e){const e=s.Qb();s.Pb(0,"app-play-trivia-answer-item",40),s.Xb("filterAnswer",(function(t){return s.mc(e),s.bc(2).filterAnswers(t)}))("addAnswer",(function(t){return s.mc(e),s.bc(2).addAnswer(t)}))("imageVisible",(function(){return s.mc(e),s.bc(2).emitterImages()})),s.Ob()}if(2&e){const e=t.$implicit,i=s.bc(2);s.hc("answer",e)("timeline",i.timeline)("trivia",i.trivia)}}function y(e,t){if(1&e&&(s.Pb(0,"div",33),s.Pb(1,"span",34),s.sc(2,"Replies"),s.Ob(),s.rc(3,_,1,3,"app-play-trivia-answer-item",39),s.Ob()),2&e){const e=s.bc();s.Bb(3),s.hc("ngForOf",e.answers)}}let B=(()=>{class e{constructor(e,t,i,n,r,s,a){this.route=e,this.authService=t,this.location=i,this.el=n,this.platformId=r,this.router=s,this.likesService=a,this.answers=[],this.sticky=!1}ngOnInit(){this.route.data.subscribe(e=>{e.data.error?(this.authService.errorMessage="Not found",Object(n.o)(this.platformId)&&setTimeout(()=>{this.authService.errorMessage=null},5e3)):this.configureComment(e.data.comment)})}deleteComment(e){this.thread=null,this.take=null,this.trivia=null,this.timeline=null,this.router.navigateByUrl("/home")}scrollToItem(e){if(Object(n.o)(this.platformId)){let t=document.getElementById(e).getBoundingClientRect().top-110;window.scrollTo(0,t),setTimeout(()=>{this.authService.scrollTo=void 0},3e3)}}checkSticky(){Object(n.o)(this.platformId)&&(window.pageYOffset>this.offsetTopBack?this.sticky||(this.sticky=!0):this.sticky&&(this.sticky=!1))}goBack(){this.location.back()}onWindowScroll(){this.checkSticky()}goToDiscussion(){this.router.navigate(["/discussions",this.take._id])}goToPost(){this.router.navigate(["/posts",this.thread._id])}filterAnswers(e){this.answers=this.answers.filter(t=>t._id!==e),this.timeline.numberOfAnswers-=1,this.router.navigateByUrl("/home")}addAnswer(e){}emitterImages(){setTimeout(()=>{this.showVisible(null)},0)}isVisible(e){if(Object(n.o)(this.platformId)){let t=e.getBoundingClientRect(),i=document.documentElement.clientHeight,n=t.bottom<i&&t.bottom>0;return t.top>0&&t.top<i||n}}showVisible(e){if(Object(n.o)(this.platformId))for(let t of this.el.nativeElement.querySelectorAll(".user-picture")){let i=t.dataset.src;i&&this.isVisible(t)&&(null!=e?e.domWrite(()=>{t.src=i,t.dataset.src=""}):(t.src=i,t.dataset.src=""))}}configureComment(e){if(e.date=new Date(e.date),e.created=this.created(e),e.count=e.likers.length,e.likedByUser=this.userHasLiked(e),e.thread){e.thread.date=new Date(e.thread.date),e.thread.likedByUser=this.userHasLiked(e.thread),e.thread.count=e.thread.likers?e.thread.likers.length:0;let t=e.thread.title.substring(0,40);e.thread.titleToShow=t.length<e.thread.title.length?e.thread.title.substring(0,40)+"...":e.thread.title,this.thread=e.thread}else if(e.take){e.take.date=new Date(e.take.date),e.take.likedByUser=this.userHasLiked(e.take),e.take.count=e.take.likers?e.take.likers.length:0;let t=e.take.take.substring(0,40);e.take.titleToShow=t.length<e.take.take.length?e.take.take.substring(0,40)+"...":e.take.take,this.take=e.take}else this.trivia=e.trivia;e.numberOfAnswers=e.answers.length,this.timeline=e,this.configureAnswers(this.timeline.answers)}configureAnswers(e){e.forEach(e=>{e.date=new Date(e.date),e.created=this.created(e),e.count=e.likers.length,e.likedByUser=this.userHasLiked(e)}),this.answers=e,Object(n.o)(this.platformId)&&setTimeout(()=>{this.authService.scrollTo&&this.scrollToItem(this.authService.scrollTo)},500)}userHasLiked(e){return!!this.authService.isLoggedIn()&&this.likesService.userHasLiked(e,this.authService.currentUser._id)}created(e){let t,i=e.date.getTime(),n=((new Date).getTime()-i)/36e5;return n>=24?(t="d",`${Math.floor(n/24)}${t}`):n<1&&n>0?(t="min",`${Math.ceil(60*n)}${t}`):(t="h",`${Math.floor(n)}${t}`)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(r.a),s.Mb(a.a),s.Mb(n.g),s.Mb(s.l),s.Mb(s.B),s.Mb(r.f),s.Mb(o.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-timeline-detail"]],viewQuery:function(e,t){var i;1&e&&s.wc(u,!0),2&e&&s.kc(i=s.Yb())&&(t.backElement=i.first)},hostBindings:function(e,t){1&e&&s.Xb("scroll",(function(){return t.onWindowScroll()}),!1,s.lc)},decls:14,vars:9,consts:[[1,"main-container"],[1,"comment-container"],[1,"comment"],[1,"comment__post"],[4,"ngIf"],[1,"comment__replies"],["class","timeline-list",4,"ngIf"],["class","answers-list",4,"ngIf"],[1,"post",3,"click"],[1,"post__info"],[1,"type"],[1,"thread-title"],[1,"by"],[1,"post__actions"],[1,"thread-info-count"],[1,"thread-info-count__action--like"],[1,"thread-info__button"],["viewBox","0 0 88 81","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"thread-info-icon"],["id","Page-1","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["id","heart-outline","transform","translate(-6.000000, -6.000000)"],["id","Rectangle-21","points","0 0 100 0 100 93 0 93"],["d","M69.8,6 C62.1,6 54.8404231,9.53151563 50,15.2700703 C45.1593654,9.53151563 37.9,6 30.2,6 C16.5595769,6 6,16.5934922 6,30.2778516 C6,47.0507578 20.9595769,60.5153203 43.6191538,81.2601797 L50,87 L56.3808462,81.2601797 C79.0402115,60.5151094 94,47.0505469 94,30.2778516 C94,16.5934922 83.4404231,6 69.8,6 Z M52.7153077,75.4526484 L51.8228269,76.2696094 L50,77.9092266 L48.1773846,76.2698203 L47.2859615,75.4537031 C36.6206154,65.6910937 27.4095962,57.2595 21.3204615,49.7205937 C15.4064808,42.3983203 12.7692308,36.402 12.7692308,30.2778516 C12.7692308,25.4547656 14.5508077,21.0111562 17.7858654,17.7658828 C21.0101346,14.5313672 25.4188077,12.75 30.2,12.75 C35.7283462,12.75 41.1936538,15.3164766 44.8194231,19.6149609 L50,25.7566172 L55.1803654,19.6149609 C58.8063462,15.3164766 64.2714423,12.75 69.8,12.75 C74.5814038,12.75 78.9898654,14.5313672 82.2143462,17.7656719 C85.4491923,21.0111562 87.2307692,25.4545547 87.2307692,30.2778516 C87.2307692,36.402 84.5935192,42.3981094 78.6799615,49.7201719 C72.5910385,57.2590781 63.3804423,65.6900391 52.7153077,75.4526484 Z","id","Shape","fill","#A2A4A6","fill-rule","nonzero"],[1,"thread-info__text"],[1,"thread-info-count__action--comments"],["viewBox","0 0 79 78","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"thread-info-icon"],["id","comment","transform","translate(-6.000000, -6.000000)"],["id","Rectangle-22","x","0","y","0","width","91","height","90"],["d","M8.517,83.161 C8.167,83.161 7.816,83.089 7.485,82.94 C6.581,82.534 6,81.634 6,80.643 L6,28.518 C6,16.102 16.102,6 28.518,6 L62.331,6 C74.747,6 84.849,16.102 84.849,28.518 L84.849,43.518 C84.849,55.934 74.747,66.036 62.331,66.036 L28.764,66.036 L10.189,82.526 C9.718,82.943 9.121,83.161 8.517,83.161 Z M29.0091478,12.036 C19.6491899,12.036 12.035,19.5369093 12.035,28.7554818 L12.035,73.2492727 L26.7351829,60.3954896 C27.2051227,59.9842451 27.8148793,59.7681026 28.4440549,59.789143 C28.5625108,59.7939249 28.6790248,59.801576 28.7965098,59.8092271 C28.8673891,59.8149654 28.9382685,59.82166 29.0101188,59.82166 L61.840851,59.82166 C71.2008089,59.82166 78.8149988,52.3207508 78.8149988,43.1021782 L78.8149988,28.7564382 C78.8149988,19.5369093 71.199838,12.0369564 61.840851,12.0369564 L29.0091478,12.0369564 L29.0091478,12.036 Z","id","Shape","fill","#A2A4A6","fill-rule","nonzero","transform","translate(45.424500, 44.580500) scale(-1, 1) translate(-45.424500, -44.580500) "],[1,"post"],[1,"timeline-list"],[3,"timeline","thread","hideReplies","deleteComment"],[3,"timeline","take","hideReplies","deleteComment"],[3,"timeline","trivia","hideReplies","deleteComment"],[1,"answers-list"],[1,"replies-header"],[3,"answer","timeline","thread","filterAnswer","addAnswer","imageVisible",4,"ngFor","ngForOf"],[3,"answer","timeline","thread","filterAnswer","addAnswer","imageVisible"],[3,"answer","timeline","take","filterAnswer","addAnswer","imageVisible",4,"ngFor","ngForOf"],[3,"answer","timeline","take","filterAnswer","addAnswer","imageVisible"],[3,"answer","timeline","trivia","filterAnswer","addAnswer","imageVisible",4,"ngFor","ngForOf"],[3,"answer","timeline","trivia","filterAnswer","addAnswer","imageVisible"]],template:function(e,t){1&e&&(s.Pb(0,"div",0),s.Pb(1,"div",1),s.Pb(2,"div",2),s.Pb(3,"section",3),s.rc(4,f,33,4,"a",4),s.rc(5,g,33,4,"a",4),s.rc(6,p,7,1,"a",4),s.Ob(),s.Pb(7,"section",5),s.rc(8,w,2,3,"div",6),s.rc(9,O,2,3,"div",6),s.rc(10,k,2,3,"div",6),s.rc(11,v,4,1,"div",7),s.rc(12,x,4,1,"div",7),s.rc(13,y,4,1,"div",7),s.Ob(),s.Ob(),s.Ob(),s.Ob()),2&e&&(s.Bb(4),s.hc("ngIf",t.thread),s.Bb(1),s.hc("ngIf",t.take),s.Bb(1),s.hc("ngIf",t.trivia),s.Bb(2),s.hc("ngIf",t.thread),s.Bb(1),s.hc("ngIf",t.take),s.Bb(1),s.hc("ngIf",t.trivia),s.Bb(1),s.hc("ngIf",t.thread&&t.answers.length),s.Bb(1),s.hc("ngIf",t.take&&t.answers.length),s.Bb(1),s.hc("ngIf",t.trivia&&t.answers.length))},directives:[n.j,c.a,l.a,b.a,n.i,d.a,h.a,m.a],styles:[".comment-container[_ngcontent-%COMP%]{max-width:800px;background:#fff;padding:20px 25px 0;margin:0 auto 30px}.type[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;margin-bottom:15px}.post[_ngcontent-%COMP%]{min-height:80px;width:80%;margin:20px auto;border-radius:5px;border:1px solid rgba(0,0,0,.1);display:flex;align-items:center;justify-content:space-between;padding:20px;cursor:pointer}.post__info[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:1.5rem;margin-right:20px}.trivia-warning[_ngcontent-%COMP%]{padding:50px;text-align:center;font-size:2rem}button[_ngcontent-%COMP%]{background:none;color:inherit;border:none;padding:0;font:inherit;cursor:pointer;outline:inherit}.thread-info__text[_ngcontent-%COMP%]{font-size:1.3rem;color:#333}.thread-info-count__action--like[_ngcontent-%COMP%]{margin-right:10px}.thread-title[_ngcontent-%COMP%]{font-weight:700;white-space:pre-wrap}.by[_ngcontent-%COMP%]{font-size:1.4rem;color:#969696;margin-top:5px}.thread-info-count[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.thread-info-count[_ngcontent-%COMP%]   .thread-info__button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.thread-info-icon[_ngcontent-%COMP%]{height:18px!important;width:22px;padding:2px}.thread-info-icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#333;stroke:#333}.answers-list[_ngcontent-%COMP%]{padding-left:50px}.replies-header[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;display:inline-block;margin:10px 0}.sticky[_ngcontent-%COMP%]{position:fixed;top:55px;background:#fff;width:700px;z-index:100}.back-icon[_ngcontent-%COMP%]{font-size:30px;margin-right:20px;cursor:pointer}.go-back[_ngcontent-%COMP%]{height:30px;font-size:1.5rem;display:flex;align-items:center;justify-content:flex-start;padding:0 10px;border-bottom:1px solid #edeff1;margin-bottom:16px;height:50px}.league[_ngcontent-%COMP%]{font-weight:700}@media (max-width:800px){.post[_ngcontent-%COMP%]{width:100%;margin:0;flex-direction:column;justify-content:flex-start;align-items:flex-start}.post__actions[_ngcontent-%COMP%]{margin-top:10px!important}}"]}),e})();var M=i("LRne"),A=i("lJxs"),I=i("JIr8"),S=i("IXe5");const L=[{path:"",component:B,resolve:{data:(()=>{class e{constructor(e,t,i,n){this.threadDiscussionService=e,this.authService=t,this.router=i,this.platformId=n}resolve(e,t){return this.threadDiscussionService.getDiscussion(e.params.id).pipe(Object(A.a)(e=>({comment:e})),Object(I.a)(e=>(this.authService.errorMessage="Not found",Object(n.o)(this.platformId)&&setTimeout(()=>{this.authService.errorMessage=null},5e3),this.router.navigateByUrl("/"),Object(M.a)({error:e}))))}}return e.\u0275fac=function(t){return new(t||e)(s.Tb(S.a),s.Tb(a.a),s.Tb(r.f),s.Tb(s.B))},e.\u0275prov=s.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}];let T=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},imports:[[r.j.forChild(L)],r.j]}),e})();var j=i("PCNd");let R=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},imports:[[n.b,j.a,T]]}),e})()}}]);
function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,r=!0,c=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return r=e.done,e},e:function(e){c=!0,o=e},f:function(){try{r||null==i.return||i.return()}finally{if(c)throw o}}}}function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,n):void 0}}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"ElG+":function(e,n,t){"use strict";t.d(n,"a",(function(){return X}));var i=t("fXoL"),o=t("ofXK"),r=t("8PDw"),c=t("q/xC"),s=t("tyNb"),a=t("fwZU"),l=t("IXe5"),d=t("Flam"),g=t("xXCF"),u=t("3Pt+"),m=t("cWq/");function b(e,n){if(1&e){var t=i.Qb();i.Pb(0,"div"),i.Pb(1,"app-edit-comment",27),i.Xb("destroyComponent",(function(e){return i.mc(t),i.bc().destroyChild(e)})),i.Ob(),i.Ob()}if(2&e){var o=i.bc();i.Bb(1),i.hc("comment",o.timeline.discussion)("timelineId",o.timeline._id)}}function p(e,n){if(1&e){var t=i.Qb();i.Pb(0,"div",28),i.Xb("click",(function(){return i.mc(t),i.bc().toggleMoreOptions()})),i.ac(),i.Pb(1,"svg",29),i.Nb(2,"path",30),i.Ob(),i.Ob()}}function h(e,n){if(1&e){var t=i.Qb();i.Pb(0,"div",31),i.Pb(1,"ul",32),i.Pb(2,"li",33),i.Xb("click",(function(){return i.mc(t),i.bc().editTimeline()})),i.Pb(3,"button",34),i.ac(),i.Pb(4,"svg",35),i.Nb(5,"path",36),i.Nb(6,"path",37),i.Ob(),i.Zb(),i.Pb(7,"span",38),i.sc(8,"Edit"),i.Ob(),i.Ob(),i.Ob(),i.Pb(9,"li",33),i.Xb("click",(function(){return i.mc(t),i.bc().deleteTimeline()})),i.Pb(10,"button",34),i.ac(),i.Pb(11,"svg",39),i.Nb(12,"path",40),i.Nb(13,"path",41),i.Ob(),i.Zb(),i.Pb(14,"span",38),i.sc(15,"Delete"),i.Ob(),i.Ob(),i.Ob(),i.Pb(16,"li",33),i.Xb("click",(function(){return i.mc(t),i.bc().toggleMoreOptions()})),i.Pb(17,"button",34),i.Pb(18,"span",38),i.sc(19,"Cancel"),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob()}}function f(e,n){1&e&&(i.ac(),i.Pb(0,"svg",42),i.Pb(1,"g",43),i.Pb(2,"g",44),i.Nb(3,"rect",45),i.Pb(4,"g",46),i.Nb(5,"path",47),i.Ob(),i.Ob(),i.Ob(),i.Ob())}function v(e,n){1&e&&(i.ac(),i.Pb(0,"svg",48),i.Pb(1,"g",43),i.Pb(2,"g",49),i.Nb(3,"polygon",50),i.Nb(4,"path",51),i.Ob(),i.Ob(),i.Ob())}function _(e,n){if(1&e&&(i.Pb(0,"span",22),i.sc(1),i.Ob()),2&e){var t=i.bc();i.Db("liked",null==t.timeline?null:t.timeline.likedByUser),i.Bb(1),i.tc(null==t.timeline?null:t.timeline.count)}}function x(e,n){1&e&&(i.Pb(0,"span",52),i.sc(1,"Like"),i.Ob())}function O(e,n){if(1&e){var t=i.Qb();i.Pb(0,"div",53),i.Pb(1,"span",54),i.sc(2,"Log in or create an account to leave a comment"),i.Ob(),i.Pb(3,"div",55),i.Pb(4,"button",56),i.Xb("click",(function(){return i.mc(t),i.bc().goAccess("login")})),i.sc(5,"Log in"),i.Ob(),i.Pb(6,"button",57),i.Xb("click",(function(){return i.mc(t),i.bc().goAccess("signup")})),i.sc(7,"Create account"),i.Ob(),i.Ob(),i.Ob()}}function P(e,n){if(1&e){var t=i.Qb();i.Pb(0,"button",69),i.Xb("click",(function(){return i.mc(t),i.bc(2).sendComment()})),i.Pb(1,"span"),i.sc(2,"Reply"),i.Ob(),i.Ob()}if(2&e){var o=i.bc(2);i.Bb(1),i.Db("disabled",0==o.comment.length)}}function w(e,n){1&e&&(i.Pb(0,"button",70),i.Nb(1,"div",71),i.Ob())}var C=function(){return{standalone:!0}};function M(e,n){if(1&e){var t=i.Qb();i.Pb(0,"div"),i.Pb(1,"div",58),i.Pb(2,"div",59),i.Nb(3,"img",60),i.Ob(),i.Pb(4,"div",61),i.Pb(5,"div",62),i.Pb(6,"div",63),i.Pb(7,"textarea",64),i.Xb("ngModelChange",(function(e){return i.mc(t),i.bc().comment=e}))("blur",(function(){return i.mc(t),i.bc().commentUnfocused()}))("focus",(function(){return i.mc(t),i.bc().commentFocused()})),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Pb(8,"div",65),i.Pb(9,"button",66),i.Xb("click",(function(){return i.mc(t),i.bc().toggleComment=!1})),i.Pb(10,"span"),i.sc(11,"Cancel"),i.Ob(),i.Ob(),i.rc(12,P,3,2,"button",67),i.rc(13,w,2,0,"button",68),i.Ob(),i.Ob()}if(2&e){var o=i.bc();i.Bb(3),i.hc("src",null==o.authService||null==o.authService.currentUser?null:o.authService.currentUser.profilePicture,i.oc),i.Bb(1),i.Db("focused",o.textareaFocused),i.Bb(3),i.hc("ngModel",o.comment)("ngModelOptions",i.ic(7,C)),i.Bb(5),i.hc("ngIf",!o.sendingComment),i.Bb(1),i.hc("ngIf",o.sendingComment)}}function k(e,n){1&e&&(i.ac(),i.Pb(0,"svg",76),i.Nb(1,"path",77),i.Ob())}function y(e,n){1&e&&(i.ac(),i.Pb(0,"svg",78),i.Nb(1,"path",79),i.Ob())}function S(e,n){1&e&&(i.Pb(0,"span"),i.sc(1,"View"),i.Ob())}function I(e,n){1&e&&(i.Pb(0,"span"),i.sc(1,"Hide"),i.Ob())}function B(e,n){1&e&&(i.Pb(0,"span"),i.sc(1,"reply"),i.Ob())}function z(e,n){1&e&&(i.Pb(0,"span"),i.sc(1,"replies"),i.Ob())}function A(e,n){if(1&e){var t=i.Qb();i.Pb(0,"div",72),i.Pb(1,"button",73),i.Xb("click",(function(){return i.mc(t),i.bc().getAnswers()})),i.rc(2,k,2,0,"svg",74),i.rc(3,y,2,0,"svg",75),i.Pb(4,"span"),i.rc(5,S,2,0,"span",1),i.rc(6,I,2,0,"span",1),i.sc(7),i.rc(8,B,2,0,"span",1),i.rc(9,z,2,0,"span",1),i.Ob(),i.Ob(),i.Ob()}if(2&e){var o=i.bc();i.Bb(2),i.hc("ngIf",!o.toggleReplies),i.Bb(1),i.hc("ngIf",o.toggleReplies),i.Bb(2),i.hc("ngIf",!o.toggleReplies),i.Bb(1),i.hc("ngIf",o.toggleReplies),i.Bb(1),i.uc(" ",null==o.timeline?null:o.timeline.numberOfAnswers," "),i.Bb(1),i.hc("ngIf",1==(null==o.timeline?null:o.timeline.numberOfAnswers)),i.Bb(1),i.hc("ngIf",(null==o.timeline?null:o.timeline.numberOfAnswers)>1)}}function L(e,n){1&e&&i.Nb(0,"div",80)}function U(e,n){1&e&&i.Nb(0,"div",81)}function j(e,n){if(1&e){var t=i.Qb();i.Pb(0,"app-take-answer-item",83),i.Xb("filterAnswer",(function(e){return i.mc(t),i.bc(2).filterAnswers(e)}))("addAnswer",(function(e){return i.mc(t),i.bc(2).addAnswer(e)}))("imageVisible",(function(){return i.mc(t),i.bc(2).emitterImages()})),i.Ob()}if(2&e){var o=n.$implicit,r=i.bc(2);i.hc("answer",o)("timeline",r.timeline)("take",r.take)}}function T(e,n){if(1&e&&(i.Pb(0,"div",81),i.rc(1,j,1,3,"app-take-answer-item",82),i.Ob()),2&e){var t=i.bc();i.Bb(1),i.hc("ngForOf",t.answers)}}var X=function(){var e=function(){function e(n,t,o,r,c,s,a,l){_classCallCheck(this,e),this.authService=n,this.platformId=t,this.likesService=o,this.router=r,this.el=c,this.webSocketService=s,this.threadDiscussionService=a,this.takeDiscussionService=l,this.toggleEdit=!1,this.editComment=!1,this.replied=!1,this.loadingAnswers=!1,this.answers=[],this.errorMessage="",this.comment="",this.sendingComment=!1,this.textareaFocused=!1,this.toggleComment=!1,this.toggleReplies=!1,this.deleteComment=new i.n,this.discussionOrAnswer="discussion"}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"toggleMoreOptions",value:function(){this.toggleEdit=!this.toggleEdit}},{key:"destroyChild",value:function(e){this.editComment=!1,e&&(this.timeline.discussion=e)}},{key:"commentFocused",value:function(){this.textareaFocused=!0}},{key:"commentUnfocused",value:function(){this.textareaFocused=!1}},{key:"filterAnswers",value:function(e){this.answers=this.answers.filter((function(n){return n._id!==e})),this.timeline.numberOfAnswers-=1}},{key:"addAnswer",value:function(e){this.answers.push(e)}},{key:"goToUser",value:function(){this.router.navigate(["/u",this.timeline.user.username])}},{key:"editTimeline",value:function(){this.editComment=!0,this.toggleEdit=!1}},{key:"deleteTimeline",value:function(){var e=this;if(this.toggleEdit=!1,1==confirm("Do you want to delete this comment?")){var n={dId:this.timeline._id,takeId:this.take._id,userId:this.authService.currentUser._id};this.deleteComment.emit(this.timeline._id),this.takeDiscussionService.deletePostMyTake(n).subscribe((function(n){n||(e.authService.errorMessage="Could not delete comment. Please try again later",setTimeout((function(){e.authService.errorMessage=null}),3e3))}),(function(n){e.authService.errorMessage="Could not delete comment. Please try again later",setTimeout((function(){e.authService.errorMessage=null}),3e3)}))}}},{key:"getAnswers",value:function(){var e=this;this.toggleReplies=!this.toggleReplies,this.answers.length&&!this.replied||(this.loadingAnswers=!0,this.threadDiscussionService.getAnswers(this.timeline._id).subscribe((function(n){e.configureAnswers(n)}),(function(n){e.authService.errorMessage=n,setTimeout((function(){e.authService.errorMessage=null}),5e3),e.loadingAnswers=!1})))}},{key:"emitterImages",value:function(){var e=this;setTimeout((function(){e.showVisible(null)}),0)}},{key:"isVisible",value:function(e){if(Object(o.o)(this.platformId)){var n=e.getBoundingClientRect(),t=document.documentElement.clientHeight,i=n.bottom<t&&n.bottom>0;return n.top>0&&n.top<t||i}}},{key:"showVisible",value:function(e){var n=this;if(Object(o.o)(this.platformId)){var t,i=_createForOfIteratorHelper(this.el.nativeElement.querySelectorAll(".user-picture"));try{var r=function(){var i=t.value,o=i.dataset.src;o&&n.isVisible(i)&&(null!=e?e.domWrite((function(){i.src=o,i.dataset.src=""})):(i.src=o,i.dataset.src=""))};for(i.s();!(t=i.n()).done;)r()}catch(c){i.e(c)}finally{i.f()}}}},{key:"goAccess",value:function(e){this.authService.toggleAccess=!0,this.authService.register=!0,this.authService.toggleLogin="login"==e}},{key:"configureAnswers",value:function(e){var n=this;e.forEach((function(e){e.date=new Date(e.date),e.created=n.created(e),e.count=e.likers.length,e.likedByUser=n.userHasLiked(e)})),this.timeline.numberOfAnswers=e.length,this.replied=!1,setTimeout((function(){n.loadingAnswers=!1,n.answers=e}),500)}},{key:"sendComment",value:function(){var e=this;if(0!=this.comment.length&&this.authService.isLoggedIn()){this.sendingComment=!0;var n={takeId:this.take._id||String(this.take),response:this.comment,parent:this.timeline._id,userMention:this.timeline.user._id,playerIds:this.timeline.user.playerIds};this.takeDiscussionService.postAnswer(n,this.take._id,this.timeline._id,this.timeline.discussion).subscribe((function(n){e.webSocketService.emitPost(e.take._id,"take",e.timeline.user._id,e.authService.currentUser._id),e.timeline.numberOfAnswers>0?e.timeline.numberOfAnswers+=1:e.timeline.numberOfAnswers=1,n.count=0,e.take.replies+=1,e.sendingComment=!1,e.comment="",e.toggleComment=!1,n.date=new Date(n.date),n.children=[],n.created="1min",n.count=0,n.likedByUser=e.userHasLiked(n),n.user={username:e.authService.currentUser.username,playerIds:e.authService.currentUser.playerIds,profilePicture:e.authService.currentUser.profilePicture,profilePictureThumbnail:e.authService.currentUser.profilePictureThumbnail,_id:e.authService.currentUser._id,badge:e.authService.currentUser.badge},n.responding={username:e.timeline.user.username},e.answers.unshift(n),e.replied=!0}),(function(n){e.sendingComment=!1,e.authService.errorMessage=n,setTimeout((function(){e.authService.errorMessage=null}),5e3)}))}}},{key:"like",value:function(){this.authService.isLoggedIn()?this.userHasLiked(this.timeline)?(this.timeline.likedByUser=!1,this.timeline.count-=1,this.likesService.deleteLike(this.discussionOrAnswer,this.timeline,this.authService.currentUser._id)):(this.timeline.likedByUser=!0,this.timeline.count+=1,this.likesService.postLike(this.discussionOrAnswer,this.timeline,this.authService.currentUser._id)):(this.authService.toggleAccess=!0,this.authService.register=!0,this.authService.toggleLogin=!1)}},{key:"created",value:function(e){var n,t=e.date.getTime(),i=((new Date).getTime()-t)/36e5;return i>=24?(n="d","".concat(Math.floor(i/24)).concat(n)):i<1&&i>0?(n="min","".concat(Math.ceil(60*i)).concat(n)):(n="h","".concat(Math.floor(i)).concat(n))}},{key:"userHasLiked",value:function(e){return!!this.authService.isLoggedIn()&&this.likesService.userHasLiked(e,this.authService.currentUser._id)}}]),e}();return e.\u0275fac=function(n){return new(n||e)(i.Mb(r.a),i.Mb(i.B),i.Mb(c.a),i.Mb(s.f),i.Mb(i.l),i.Mb(a.a),i.Mb(l.a),i.Mb(d.a))},e.\u0275cmp=i.Gb({type:e,selectors:[["app-take-timeline-item"]],inputs:{timeline:"timeline",take:"take",hideReplies:"hideReplies"},outputs:{deleteComment:"deleteComment"},decls:35,vars:17,consts:[[1,"ion-item-btn"],[4,"ngIf"],[1,"top-thread"],[1,"header-link","user-info","white","ion-padding",3,"click"],[1,"span-userimage"],[1,"profile-picture",3,"src"],[1,"transparent",2,"color","transparent"],[1,"by-username"],[1,"username"],[1,"name"],["class","delete-thread",3,"click",4,"ngIf"],["class","sorting__options",4,"ngIf"],[1,"discussion"],[1,"post-actions"],[1,"post-actions__action","like-div"],[1,"icon-div","heart-div",3,"click"],["class","take-actions-icon","viewBox","0 0 81 75","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",4,"ngIf"],["class","take-actions-icon","viewBox","0 0 88 81","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",4,"ngIf"],["class","post-actions__text",3,"liked",4,"ngIf"],["class","post-actions__text cero-likes",4,"ngIf"],[1,"post-actions__action","post-actions__action--share"],[1,"icon-div","share-div",3,"click"],[1,"post-actions__text"],["class","login-comment",4,"ngIf"],["class","replies-div",4,"ngIf"],["class","spinner-border spinner","role","status",4,"ngIf"],["class","replies-container",4,"ngIf"],[3,"comment","timelineId","destroyComponent"],[1,"delete-thread",3,"click"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-three-dots","more-icon"],["fill-rule","evenodd","d","M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"],[1,"sorting__options"],[1,"sorting__list"],[1,"sorting__item",3,"click"],[1,"sorting__button"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-pencil","sorting__icon"],["fill-rule","evenodd","d","M11.293 1.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-9 9a1 1 0 0 1-.39.242l-3 1a1 1 0 0 1-1.266-1.265l1-3a1 1 0 0 1 .242-.391l9-9zM12 2l2 2-9 9-3 1 1-3 9-9z"],["fill-rule","evenodd","d","M12.146 6.354l-2.5-2.5.708-.708 2.5 2.5-.707.708zM3 10v.5a.5.5 0 0 0 .5.5H4v.5a.5.5 0 0 0 .5.5H5v.5a.5.5 0 0 0 .5.5H6v-1.5a.5.5 0 0 0-.5-.5H5v-.5a.5.5 0 0 0-.5-.5H3z"],[1,"sorting__text"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-trash","sorting__icon"],["d","M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"],["fill-rule","evenodd","d","M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"],["viewBox","0 0 81 75","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"take-actions-icon"],["id","Page-1","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["id","Group-53","transform","translate(-6.000000, -6.000000)"],["id","Rectangle-20","fill-opacity","0","fill","#D8D8D8","x","0","y","0","width","93","height","87"],["id","heart","transform","translate(6.000000, 6.000000)","fill","#EB4B59","fill-rule","nonzero"],["d","M58.725,0 C51.6375,0 44.9553894,3.26992188 40.5,8.58339844 C36.0444159,3.26992188 29.3625,0 22.275,0 C9.71961058,0 0,9.80878906 0,22.4794922 C0,38.0099609 13.7696106,50.4771484 34.6267212,69.6853516 L40.5,75 L46.3732788,69.6853516 C67.2301947,50.4769531 81,38.0097656 81,22.4794922 C81,9.80878906 71.2803894,0 58.725,0 Z","id","Combined-Shape"],["viewBox","0 0 88 81","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"take-actions-icon"],["id","heart-outline","transform","translate(-6.000000, -6.000000)"],["id","Rectangle-21","points","0 0 100 0 100 93 0 93"],["d","M69.8,6 C62.1,6 54.8404231,9.53151563 50,15.2700703 C45.1593654,9.53151563 37.9,6 30.2,6 C16.5595769,6 6,16.5934922 6,30.2778516 C6,47.0507578 20.9595769,60.5153203 43.6191538,81.2601797 L50,87 L56.3808462,81.2601797 C79.0402115,60.5151094 94,47.0505469 94,30.2778516 C94,16.5934922 83.4404231,6 69.8,6 Z M52.7153077,75.4526484 L51.8228269,76.2696094 L50,77.9092266 L48.1773846,76.2698203 L47.2859615,75.4537031 C36.6206154,65.6910937 27.4095962,57.2595 21.3204615,49.7205937 C15.4064808,42.3983203 12.7692308,36.402 12.7692308,30.2778516 C12.7692308,25.4547656 14.5508077,21.0111562 17.7858654,17.7658828 C21.0101346,14.5313672 25.4188077,12.75 30.2,12.75 C35.7283462,12.75 41.1936538,15.3164766 44.8194231,19.6149609 L50,25.7566172 L55.1803654,19.6149609 C58.8063462,15.3164766 64.2714423,12.75 69.8,12.75 C74.5814038,12.75 78.9898654,14.5313672 82.2143462,17.7656719 C85.4491923,21.0111562 87.2307692,25.4545547 87.2307692,30.2778516 C87.2307692,36.402 84.5935192,42.3981094 78.6799615,49.7201719 C72.5910385,57.2590781 63.3804423,65.6900391 52.7153077,75.4526484 Z","id","Shape","fill","#A2A4A6","fill-rule","nonzero"],[1,"post-actions__text","cero-likes"],[1,"login-comment"],[1,"login-text"],[1,"login-buttons"],[1,"login",3,"click"],[1,"signup",3,"click"],[1,"add-comment-container"],[1,"add-comment-user"],["alt","",3,"src"],[1,"add-comment"],[1,"add-comment__textarea-container"],[1,"mid-textarea"],["placeholder","Add a comment","id","",1,"add-comment__textarea",3,"ngModel","ngModelOptions","ngModelChange","blur","focus"],[1,"send-comment"],[1,"cancel-comment__button",3,"click"],["class","send-comment__button",3,"click",4,"ngIf"],["class","send-comment__button loading-button","type","button","disabled","",4,"ngIf"],[1,"send-comment__button",3,"click"],["type","button","disabled","",1,"send-comment__button","loading-button"],["role","status",1,"spinner-border"],[1,"replies-div"],[1,"more-replies",3,"click"],["class","bi bi-chevron-down caret","width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["class","bi bi-chevron-up caret","width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-chevron-down","caret"],["fill-rule","evenodd","d","M1.646 4.646a.5.5 0 01.708 0L8 10.293l5.646-5.647a.5.5 0 01.708.708l-6 6a.5.5 0 01-.708 0l-6-6a.5.5 0 010-.708z","clip-rule","evenodd"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-chevron-up","caret"],["fill-rule","evenodd","d","M7.646 4.646a.5.5 0 01.708 0l6 6a.5.5 0 01-.708.708L8 5.707l-5.646 5.647a.5.5 0 01-.708-.708l6-6z","clip-rule","evenodd"],["role","status",1,"spinner-border","spinner"],[1,"replies-container"],[3,"answer","timeline","take","filterAnswer","addAnswer","imageVisible",4,"ngFor","ngForOf"],[3,"answer","timeline","take","filterAnswer","addAnswer","imageVisible"]],template:function(e,n){1&e&&(i.Pb(0,"div",0),i.rc(1,b,2,2,"div",1),i.Pb(2,"div",2),i.Pb(3,"div",3),i.Xb("click",(function(){return n.goToUser()})),i.Pb(4,"span",4),i.Nb(5,"img",5),i.Ob(),i.Pb(6,"span",6),i.sc(7,"::"),i.Ob(),i.Pb(8,"span",7),i.Pb(9,"span",8),i.sc(10),i.Ob(),i.Nb(11,"br"),i.Pb(12,"span",9),i.sc(13),i.Ob(),i.Ob(),i.Ob(),i.rc(14,p,3,0,"div",10),i.rc(15,h,20,0,"div",11),i.Ob(),i.Pb(16,"p",12),i.sc(17),i.Ob(),i.Pb(18,"div",13),i.Pb(19,"div",14),i.Pb(20,"button",15),i.Xb("click",(function(){return n.like()})),i.rc(21,f,6,0,"svg",16),i.rc(22,v,5,0,"svg",17),i.rc(23,_,2,3,"span",18),i.rc(24,x,2,0,"span",19),i.Ob(),i.Ob(),i.Pb(25,"div",20),i.Pb(26,"button",21),i.Xb("click",(function(){return n.toggleComment=!n.toggleComment})),i.Pb(27,"span",22),i.sc(28,"Reply"),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.rc(29,O,8,0,"div",23),i.rc(30,M,14,8,"div",1),i.rc(31,A,10,7,"div",24),i.rc(32,L,1,0,"div",25),i.rc(33,U,1,0,"div",26),i.rc(34,T,2,1,"div",26),i.Ob()),2&e&&(i.Bb(1),i.hc("ngIf",n.editComment),i.Bb(4),i.hc("src",null==n.timeline||null==n.timeline.user?null:n.timeline.user.profilePictureThumbnail,i.oc),i.Bb(5),i.tc(null==n.timeline||null==n.timeline.user?null:n.timeline.user.username),i.Bb(3),i.uc("",null==n.timeline?null:n.timeline.created," ago"),i.Bb(1),i.hc("ngIf",n.authService.currentUser&&(n.authService.currentUser.isAdmin||n.timeline.user.username===n.authService.currentUser.username)),i.Bb(1),i.hc("ngIf",n.toggleEdit),i.Bb(2),i.tc(null==n.timeline?null:n.timeline.discussion),i.Bb(4),i.hc("ngIf",null==n.timeline?null:n.timeline.likedByUser),i.Bb(1),i.hc("ngIf",!(null!=n.timeline&&n.timeline.likedByUser)),i.Bb(1),i.hc("ngIf",n.timeline.count>0),i.Bb(1),i.hc("ngIf",0==n.timeline.count),i.Bb(5),i.hc("ngIf",n.toggleComment&&!n.authService.currentUser),i.Bb(1),i.hc("ngIf",n.toggleComment&&n.authService.currentUser),i.Bb(1),i.hc("ngIf",(null==n.timeline?null:n.timeline.numberOfAnswers)>0&&!n.hideReplies),i.Bb(1),i.hc("ngIf",n.loadingAnswers&&n.toggleReplies),i.Bb(1),i.hc("ngIf",n.toggleReplies||n.replied),i.Bb(1),i.hc("ngIf",n.toggleReplies||n.replied))},directives:[o.j,g.a,u.a,u.j,u.l,o.i,m.a],styles:[".spinner[_ngcontent-%COMP%]{color:#7c7c7c;margin:10px 0 15px}ol[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.sorting__text[_ngcontent-%COMP%]{display:inline-block;margin:0 5px;font-size:1.5rem;font-weight:500;color:#7c7c7c}.sort-active[_ngcontent-%COMP%]{color:#4264d0}.sorting__icon[_ngcontent-%COMP%]{font-size:18px;color:#7c7c7c;margin-right:5px}.sorting__button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.sorting__options[_ngcontent-%COMP%]{background:#fff;position:absolute;top:20px;right:5px;width:125px;z-index:300;border-radius:5px;box-shadow:0 2px 4px 0 rgba(28,28,28,.2);overflow:hidden}.bi-caret-down-fill[_ngcontent-%COMP%]{color:#7c7c7c}.sorting__item[_ngcontent-%COMP%]{padding:15px 10px;width:100%;height:100%;cursor:pointer}.sorting__item[_ngcontent-%COMP%]:hover{background:#d8d8d8}.delete-thread[_ngcontent-%COMP%]{font-size:16px;color:#000;cursor:pointer;border-radius:50px;width:26px;height:26px;display:flex;align-items:center;justify-content:center;z-index:9}.delete-thread[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.297)}div.header-link[_ngcontent-%COMP%]{display:table;padding:16px 0 10px;height:59px}.top-thread[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;align-items:center;height:59px;margin-bottom:4px}.ago[_ngcontent-%COMP%]{position:absolute;top:18px;right:16px;color:#a2a4a6;font-size:12px}.user-info[_ngcontent-%COMP%]{cursor:pointer}.username[_ngcontent-%COMP%]:hover{text-decoration:underline}.transparent[_ngcontent-%COMP%], .user-info[_ngcontent-%COMP%]   .span-userimage[_ngcontent-%COMP%]{vertical-align:middle;display:table-cell}.profile-picture[_ngcontent-%COMP%]{border-radius:50%;height:32px;width:32px;-o-object-fit:cover;object-fit:cover}ion-tab-bar[_ngcontent-%COMP%]{display:none}.by-username[_ngcontent-%COMP%]{color:#000;font-weight:500;font-size:1.3rem;margin-left:10px;vertical-align:middle;display:table-cell}.by-username[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#a1a1a1;font-size:12px;font-weight:400}.level[_ngcontent-%COMP%]{width:15px;-o-object-fit:contain;object-fit:contain;margin:-3px 1px -2px 4px}.level[_ngcontent-%COMP%], .level-container[_ngcontent-%COMP%]{height:15px}.discussion[_ngcontent-%COMP%]{padding:0;margin:0;color:#14171a;white-space:pre-wrap;font-size:1.5rem;line-height:135%}.ion-item-btn[_ngcontent-%COMP%]{border-bottom:1px solid #edeff1;padding:2px 0 4px}ion-icon.heart-icon[_ngcontent-%COMP%]{font-size:15px;margin-right:5px!important}.comment-icon[_ngcontent-%COMP%]{font-size:14px;margin-right:5px!important}.comment-div[_ngcontent-%COMP%]{width:58px}.cero-likes[_ngcontent-%COMP%]{margin-left:-1px}.reply-icon[_ngcontent-%COMP%]{font-size:15px;margin-right:8px!important}.reply-div[_ngcontent-%COMP%]{margin:0 0 0 auto}.count[_ngcontent-%COMP%]{font-weight:500}.count[_ngcontent-%COMP%], .reply[_ngcontent-%COMP%]{font-size:14px;color:#989aa2}.reply[_ngcontent-%COMP%]{font-weight:400}.custom-btn[_ngcontent-%COMP%]{color:#eb4b59!important}.like-div[_ngcontent-%COMP%]{display:inline-block;padding-left:3px;width:55px}.reply-div[_ngcontent-%COMP%]{padding-right:6px;width:90px}.likes[_ngcontent-%COMP%]{font-size:14px;color:#989aa2;font-weight:500}ion-avatar[_ngcontent-%COMP%]{width:0;height:0}.replies-container[_ngcontent-%COMP%]{padding-left:40px}.actions[_ngcontent-%COMP%]{margin-top:4px;height:35px}.actions[_ngcontent-%COMP%], .post-actions[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.post-actions[_ngcontent-%COMP%]{margin-top:5px;height:40px;justify-content:flex-start}.post-actions__action[_ngcontent-%COMP%]{font-size:1.4rem;padding:5px 0;border-radius:3px}.loading-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:5px;height:32px}.post-actions__text[_ngcontent-%COMP%]{margin-left:5px;display:inline-block;margin-top:-1px;color:#7c7c7c}.take-actions-icon[_ngcontent-%COMP%]{height:14px;margin-top:-2px}.take-actions-icon[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]{fill:#7c7c7c}.share-div[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:500}.icon-div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;font-size:1.3rem;width:60px}.heart-div[_ngcontent-%COMP%]:hover > .post-actions__text[_ngcontent-%COMP%]{color:#eb4b59!important}.heart-div[_ngcontent-%COMP%]:hover > svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#eb4b59!important}.liked[_ngcontent-%COMP%]{color:#eb4b59!important}.replies-div[_ngcontent-%COMP%]{padding-bottom:7px;padding-top:1px;font-weight:500}.more-replies[_ngcontent-%COMP%]{font-size:1.4rem;color:#4264d0}.more-replies[_ngcontent-%COMP%]   .caret[_ngcontent-%COMP%]{margin-right:5px}.more-replies[_ngcontent-%COMP%]   .caret[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#4264d0!important}button[_ngcontent-%COMP%]{background:none;color:inherit;border:none;padding:0;font:inherit;cursor:pointer;outline:inherit}.add-comment[_ngcontent-%COMP%]{border-radius:4px;overflow:hidden;background:#fff;border:1px solid #dcdddf;flex:1}.add-comment[_ngcontent-%COMP%]   .add-comment__textarea-container[_ngcontent-%COMP%]{overflow:hidden auto;padding:8px 0;resize:vertical}.add-comment[_ngcontent-%COMP%]   .add-comment__textarea[_ngcontent-%COMP%]:focus{opacity:1}.add-comment[_ngcontent-%COMP%]   .add-comment__textarea[_ngcontent-%COMP%]{overflow-wrap:break-word;height:56px;opacity:.5;font-size:1.5rem;font-weight:400;line-height:20px;background:transparent;border:none;box-sizing:border-box;display:block;outline:none;resize:none;width:100%;height:100%;padding:0 16px}.add-comment[_ngcontent-%COMP%]   .mid-textarea[_ngcontent-%COMP%]{height:100%}.send-comment[_ngcontent-%COMP%]{height:42px;padding:3px 0;display:flex;height:100%;align-items:center;justify-content:flex-end}.send-comment[_ngcontent-%COMP%]   .cancel-comment__button[_ngcontent-%COMP%]{background:transparent;color:grey}.send-comment[_ngcontent-%COMP%]   .cancel-comment__button[_ngcontent-%COMP%], .send-comment[_ngcontent-%COMP%]   .send-comment__button[_ngcontent-%COMP%]{line-height:normal;min-height:27px;min-width:96px;order:2;border:1px solid transparent;border-radius:4px;box-sizing:border-box;text-align:center;text-decoration:none;font-size:12px;font-weight:700;line-height:24px;text-transform:uppercase;padding:3px 16px}.send-comment[_ngcontent-%COMP%]   .send-comment__button[_ngcontent-%COMP%]{margin:4px 8px;background:#4264d0;color:#fff}.send-comment[_ngcontent-%COMP%]   .send-comment__button[_ngcontent-%COMP%]:hover{opacity:.5}.focused[_ngcontent-%COMP%]{border:1px solid #000!important}.add-comment-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:flex-start;margin-top:10px}.add-comment-container[_ngcontent-%COMP%]   .add-comment-user[_ngcontent-%COMP%]{margin-right:15px;width:40px}.add-comment-container[_ngcontent-%COMP%]   .add-comment-user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:50px;-o-object-fit:cover;object-fit:cover}.disabled[_ngcontent-%COMP%]{opacity:.6}.login-text[_ngcontent-%COMP%]{font-size:1.6rem;color:#7c7c7c;font-weight:500}.login-comment[_ngcontent-%COMP%]{align-items:center;border-radius:4px;border:1px solid #dcdddf;display:flex;justify-content:space-between;padding:15px 10px;margin:15px 0}.login-buttons[_ngcontent-%COMP%]{display:flex;margin-left:10px}.login[_ngcontent-%COMP%]{height:34px;margin-right:15px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.2rem;border:1px solid #4264d0;color:#4264d0;padding:0 20px;border-radius:5px;cursor:pointer;text-transform:uppercase}.heart-div[_ngcontent-%COMP%]:hover{color:#eb4b59!important}.login[_ngcontent-%COMP%]:hover{background:rgba(64,97,211,.31)}.signup[_ngcontent-%COMP%]{height:34px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.2rem;border:1px solid #4264d0;background:#4264d0;color:#fff;padding:0 20px;border-radius:5px;cursor:pointer;text-transform:uppercase}.signup[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-top:1px}.signup[_ngcontent-%COMP%]:hover{background:#93a8ec;border:1px solid #93a8ec}@media only screen and (max-width:800px){.add-comment-user[_ngcontent-%COMP%], .login-text[_ngcontent-%COMP%]{display:none}.login-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}}"]}),e}()},"cWq/":function(e,n,t){"use strict";t.d(n,"a",(function(){return k}));var i=t("fXoL"),o=t("8PDw"),r=t("tyNb"),c=t("Flam"),s=t("q/xC"),a=t("IXe5"),l=t("fwZU"),d=t("ofXK"),g=t("xXCF"),u=t("3Pt+");function m(e,n){if(1&e){var t=i.Qb();i.Pb(0,"div"),i.Pb(1,"app-edit-comment",25),i.Xb("destroyComponent",(function(e){return i.mc(t),i.bc().destroyChild(e)})),i.Ob(),i.Ob()}if(2&e){var o=i.bc();i.Bb(1),i.hc("comment",o.answer.discussion)("answerId",o.answer._id)("timelineId",o.timeline._id)}}function b(e,n){if(1&e){var t=i.Qb();i.Pb(0,"div",26),i.Xb("click",(function(){return i.mc(t),i.bc().toggleMoreOptions()})),i.ac(),i.Pb(1,"svg",27),i.Nb(2,"path",28),i.Ob(),i.Ob()}}function p(e,n){if(1&e){var t=i.Qb();i.Pb(0,"div",29),i.Pb(1,"ul",30),i.Pb(2,"li",31),i.Xb("click",(function(){return i.mc(t),i.bc().editTimeline()})),i.Pb(3,"button",32),i.ac(),i.Pb(4,"svg",33),i.Nb(5,"path",34),i.Nb(6,"path",35),i.Ob(),i.Zb(),i.Pb(7,"span",36),i.sc(8,"Edit"),i.Ob(),i.Ob(),i.Ob(),i.Pb(9,"li",31),i.Xb("click",(function(){return i.mc(t),i.bc().deleteTimeline()})),i.Pb(10,"button",32),i.ac(),i.Pb(11,"svg",37),i.Nb(12,"path",38),i.Nb(13,"path",39),i.Ob(),i.Zb(),i.Pb(14,"span",36),i.sc(15,"Delete"),i.Ob(),i.Ob(),i.Ob(),i.Pb(16,"li",31),i.Xb("click",(function(){return i.mc(t),i.bc().toggleMoreOptions()})),i.Pb(17,"button",32),i.Pb(18,"span",36),i.sc(19,"Cancel"),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob()}}function h(e,n){if(1&e&&(i.Pb(0,"span",40),i.sc(1),i.Ob()),2&e){var t=i.bc();i.Bb(1),i.uc("@",null==t.answer||null==t.answer.responding?null:t.answer.responding.username,"")}}function f(e,n){1&e&&(i.ac(),i.Pb(0,"svg",41),i.Pb(1,"g",42),i.Pb(2,"g",43),i.Nb(3,"rect",44),i.Pb(4,"g",45),i.Nb(5,"path",46),i.Ob(),i.Ob(),i.Ob(),i.Ob())}function v(e,n){1&e&&(i.ac(),i.Pb(0,"svg",47),i.Pb(1,"g",42),i.Pb(2,"g",48),i.Nb(3,"polygon",49),i.Nb(4,"path",50),i.Ob(),i.Ob(),i.Ob())}function _(e,n){if(1&e&&(i.Pb(0,"span",23),i.sc(1),i.Ob()),2&e){var t=i.bc();i.Db("liked",null==t.answer?null:t.answer.likedByUser),i.Bb(1),i.tc(null==t.answer?null:t.answer.count)}}function x(e,n){1&e&&(i.Pb(0,"span",51),i.sc(1,"Like"),i.Ob())}function O(e,n){if(1&e){var t=i.Qb();i.Pb(0,"div",52),i.Pb(1,"span",53),i.sc(2,"Log in or create an account to leave a comment"),i.Ob(),i.Pb(3,"div",54),i.Pb(4,"button",55),i.Xb("click",(function(){return i.mc(t),i.bc().goAccess("login")})),i.sc(5,"Log in"),i.Ob(),i.Pb(6,"button",56),i.Xb("click",(function(){return i.mc(t),i.bc().goAccess("signup")})),i.sc(7,"Create account"),i.Ob(),i.Ob(),i.Ob()}}function P(e,n){if(1&e){var t=i.Qb();i.Pb(0,"button",68),i.Xb("click",(function(){return i.mc(t),i.bc(2).sendComment()})),i.Pb(1,"span"),i.sc(2,"Reply"),i.Ob(),i.Ob()}if(2&e){var o=i.bc(2);i.Bb(1),i.Db("disabled",0==o.comment.length)}}function w(e,n){1&e&&(i.Pb(0,"button",69),i.Nb(1,"div",70),i.Ob())}var C=function(){return{standalone:!0}};function M(e,n){if(1&e){var t=i.Qb();i.Pb(0,"div"),i.Pb(1,"div",57),i.Pb(2,"div",58),i.Nb(3,"img",59),i.Ob(),i.Pb(4,"div",60),i.Pb(5,"div",61),i.Pb(6,"div",62),i.Pb(7,"textarea",63),i.Xb("ngModelChange",(function(e){return i.mc(t),i.bc().comment=e}))("blur",(function(){return i.mc(t),i.bc().commentUnfocused()}))("focus",(function(){return i.mc(t),i.bc().commentFocused()})),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Pb(8,"div",64),i.Pb(9,"button",65),i.Xb("click",(function(){return i.mc(t),i.bc().toggleComment=!1})),i.Pb(10,"span"),i.sc(11,"Cancel"),i.Ob(),i.Ob(),i.rc(12,P,3,2,"button",66),i.rc(13,w,2,0,"button",67),i.Ob(),i.Ob()}if(2&e){var o=i.bc();i.Bb(3),i.hc("src",null==o.authService||null==o.authService.currentUser?null:o.authService.currentUser.profilePicture,i.oc),i.Bb(1),i.Db("focused",o.textareaFocused),i.Bb(3),i.hc("ngModel",o.comment)("ngModelOptions",i.ic(7,C)),i.Bb(5),i.hc("ngIf",!o.sendingComment),i.Bb(1),i.hc("ngIf",o.sendingComment)}}var k=function(){var e=function(){function e(n,t,o,r,c,s){_classCallCheck(this,e),this.authService=n,this.router=t,this.takeDiscussionService=o,this.likesService=r,this.threadDiscussionService=c,this.webSocketService=s,this.imageVisible=new i.n,this.filterAnswer=new i.n,this.addAnswer=new i.n,this.toggleComment=!1,this.editComment=!1,this.toggleEdit=!1,this.comment="",this.sendingComment=!1,this.textareaFocused=!1,this.showHideToggle=!0,this.discussionOrAnswer="answer"}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"commentFocused",value:function(){this.textareaFocused=!0}},{key:"commentUnfocused",value:function(){this.textareaFocused=!1}},{key:"goToUser",value:function(){this.router.navigate(["/u",this.answer.user.username])}},{key:"goAccess",value:function(e){this.authService.toggleAccess=!0,this.authService.register=!0,this.authService.toggleLogin="login"==e}},{key:"sendComment",value:function(){var e,n=this;if(e=this.answer.parent==this.timeline._id?this.answer._id:this.answer.parent,this.authService.isLoggedIn()){this.sendingComment=!0;var t={takeId:this.take._id||String(this.take),response:this.comment,parent:e,userMention:this.answer.user._id,playerIds:this.answer.user.playerIds};this.takeDiscussionService.postAnswer(t,t.takeId,this.timeline._id,this.answer.discussion,this.answer._id).subscribe((function(e){n.timeline.numberOfAnswers>0?n.timeline.numberOfAnswers+=1:n.timeline.numberOfAnswers=1,e.date=new Date(e.date),e.created="1min",e.count=0,e.likedByUser=n.userHasLiked(e),e.user={username:n.authService.currentUser.username,playerIds:n.authService.currentUser.playerIds,profilePicture:n.authService.currentUser.profilePicture,profilePictureThumbnail:n.authService.currentUser.profilePictureThumbnail,_id:n.authService.currentUser._id,badge:n.authService.currentUser.badge},n.webSocketService.emitPost(n.take._id,"take",n.answer.user._id,n.authService.currentUser._id),e.responding={username:n.answer.user.username},n.take.replies&&(n.take.replies+=1),n.imageVisible.emit({}),n.addAnswer.emit(e),n.sendingComment=!1,n.comment="",n.toggleComment=!1}),(function(e){n.sendingComment=!1,n.authService.errorMessage=e,setTimeout((function(){n.authService.errorMessage=null}),5e3)}))}}},{key:"editTimeline",value:function(){this.editComment=!0,this.toggleEdit=!1}},{key:"deleteTimeline",value:function(){var e=this;if(this.toggleEdit=!1,1==confirm("Do you want to delete this comment?")){var n={dId:this.timeline._id,aId:this.answer._id,takeId:this.take._id||this.take,userId:this.authService.currentUser._id};this.filterAnswer.emit(this.answer._id),this.takeDiscussionService.deletePost(n).subscribe((function(n){n||(e.authService.errorMessage="Could not delete comment. Please try again later",setTimeout((function(){e.authService.errorMessage=null}),3e3))}),(function(n){e.authService.errorMessage="Could not delete comment. Please try again later",setTimeout((function(){e.authService.errorMessage=null}),3e3)}))}}},{key:"toggleMoreOptions",value:function(){this.toggleEdit=!this.toggleEdit}},{key:"destroyChild",value:function(e){this.editComment=!1,e&&(this.answer.discussion=e)}},{key:"like",value:function(){this.authService.isLoggedIn()?this.userHasLiked(this.answer)?(this.answer.likedByUser=!1,this.answer.count-=1,this.likesService.deleteLike(this.discussionOrAnswer,this.timeline,this.authService.currentUser._id,this.answer)):(this.answer.likedByUser=!0,this.answer.count+=1,this.likesService.postLike(this.discussionOrAnswer,this.timeline,this.authService.currentUser._id,this.answer)):(this.authService.toggleAccess=!0,this.authService.register=!0,this.authService.toggleLogin=!1)}},{key:"userHasLiked",value:function(e){return!!this.authService.isLoggedIn()&&this.likesService.userHasLiked(e,this.authService.currentUser._id)}},{key:"created",value:function(e){var n,t=e.date.getTime(),i=((new Date).getTime()-t)/36e5;return i>=24?(n="d","".concat(Math.floor(i/24)).concat(n)):i<1&&i>0?(n="min","".concat(Math.ceil(60*i)).concat(n)):(n="h","".concat(Math.floor(i)).concat(n))}}]),e}();return e.\u0275fac=function(n){return new(n||e)(i.Mb(o.a),i.Mb(r.f),i.Mb(c.a),i.Mb(s.a),i.Mb(a.a),i.Mb(l.a))},e.\u0275cmp=i.Gb({type:e,selectors:[["app-take-answer-item"]],inputs:{answer:"answer",timeline:"timeline",take:"take"},outputs:{imageVisible:"imageVisible",filterAnswer:"filterAnswer",addAnswer:"addAnswer"},decls:32,vars:17,consts:[[1,"ion-item-btn",3,"id"],[4,"ngIf"],[1,"top-thread"],[1,"header-link","user-info","white","ion-padding",3,"click"],[1,"span-userimage"],[1,"profile-picture",3,"src"],[1,"transparent",2,"color","transparent"],[1,"by-username"],[1,"username"],[1,"name"],["class","delete-thread",3,"click",4,"ngIf"],["class","sorting__options",4,"ngIf"],[1,"discussion"],["class","responding",4,"ngIf"],[1,"post-actions"],[1,"post-actions__action","like-div"],[1,"icon-div","heart-div",3,"click"],["class","take-actions-icon","viewBox","0 0 81 75","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",4,"ngIf"],["class","take-actions-icon","viewBox","0 0 88 81","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",4,"ngIf"],["class","post-actions__text",3,"liked",4,"ngIf"],["class","post-actions__text cero-likes",4,"ngIf"],[1,"post-actions__action","post-actions__action--share"],[1,"icon-div","share-div",3,"click"],[1,"post-actions__text"],["class","login-comment",4,"ngIf"],[3,"comment","answerId","timelineId","destroyComponent"],[1,"delete-thread",3,"click"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-three-dots","more-icon"],["fill-rule","evenodd","d","M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"],[1,"sorting__options"],[1,"sorting__list"],[1,"sorting__item",3,"click"],[1,"sorting__button"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-pencil","sorting__icon"],["fill-rule","evenodd","d","M11.293 1.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-9 9a1 1 0 0 1-.39.242l-3 1a1 1 0 0 1-1.266-1.265l1-3a1 1 0 0 1 .242-.391l9-9zM12 2l2 2-9 9-3 1 1-3 9-9z"],["fill-rule","evenodd","d","M12.146 6.354l-2.5-2.5.708-.708 2.5 2.5-.707.708zM3 10v.5a.5.5 0 0 0 .5.5H4v.5a.5.5 0 0 0 .5.5H5v.5a.5.5 0 0 0 .5.5H6v-1.5a.5.5 0 0 0-.5-.5H5v-.5a.5.5 0 0 0-.5-.5H3z"],[1,"sorting__text"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-trash","sorting__icon"],["d","M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"],["fill-rule","evenodd","d","M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"],[1,"responding"],["viewBox","0 0 81 75","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"take-actions-icon"],["id","Page-1","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["id","Group-53","transform","translate(-6.000000, -6.000000)"],["id","Rectangle-20","fill-opacity","0","fill","#D8D8D8","x","0","y","0","width","93","height","87"],["id","heart","transform","translate(6.000000, 6.000000)","fill","#EB4B59","fill-rule","nonzero"],["d","M58.725,0 C51.6375,0 44.9553894,3.26992188 40.5,8.58339844 C36.0444159,3.26992188 29.3625,0 22.275,0 C9.71961058,0 0,9.80878906 0,22.4794922 C0,38.0099609 13.7696106,50.4771484 34.6267212,69.6853516 L40.5,75 L46.3732788,69.6853516 C67.2301947,50.4769531 81,38.0097656 81,22.4794922 C81,9.80878906 71.2803894,0 58.725,0 Z","id","Combined-Shape"],["viewBox","0 0 88 81","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"take-actions-icon"],["id","heart-outline","transform","translate(-6.000000, -6.000000)"],["id","Rectangle-21","points","0 0 100 0 100 93 0 93"],["d","M69.8,6 C62.1,6 54.8404231,9.53151563 50,15.2700703 C45.1593654,9.53151563 37.9,6 30.2,6 C16.5595769,6 6,16.5934922 6,30.2778516 C6,47.0507578 20.9595769,60.5153203 43.6191538,81.2601797 L50,87 L56.3808462,81.2601797 C79.0402115,60.5151094 94,47.0505469 94,30.2778516 C94,16.5934922 83.4404231,6 69.8,6 Z M52.7153077,75.4526484 L51.8228269,76.2696094 L50,77.9092266 L48.1773846,76.2698203 L47.2859615,75.4537031 C36.6206154,65.6910937 27.4095962,57.2595 21.3204615,49.7205937 C15.4064808,42.3983203 12.7692308,36.402 12.7692308,30.2778516 C12.7692308,25.4547656 14.5508077,21.0111562 17.7858654,17.7658828 C21.0101346,14.5313672 25.4188077,12.75 30.2,12.75 C35.7283462,12.75 41.1936538,15.3164766 44.8194231,19.6149609 L50,25.7566172 L55.1803654,19.6149609 C58.8063462,15.3164766 64.2714423,12.75 69.8,12.75 C74.5814038,12.75 78.9898654,14.5313672 82.2143462,17.7656719 C85.4491923,21.0111562 87.2307692,25.4545547 87.2307692,30.2778516 C87.2307692,36.402 84.5935192,42.3981094 78.6799615,49.7201719 C72.5910385,57.2590781 63.3804423,65.6900391 52.7153077,75.4526484 Z","id","Shape","fill","#A2A4A6","fill-rule","nonzero"],[1,"post-actions__text","cero-likes"],[1,"login-comment"],[1,"login-text"],[1,"login-buttons"],[1,"login",3,"click"],[1,"signup",3,"click"],[1,"add-comment-container"],[1,"add-comment-user"],["alt","",3,"src"],[1,"add-comment"],[1,"add-comment__textarea-container"],[1,"mid-textarea"],["placeholder","Add a comment","id","",1,"add-comment__textarea",3,"ngModel","ngModelOptions","ngModelChange","blur","focus"],[1,"send-comment"],[1,"cancel-comment__button",3,"click"],["class","send-comment__button",3,"click",4,"ngIf"],["class","send-comment__button loading-button","type","button","disabled","",4,"ngIf"],[1,"send-comment__button",3,"click"],["type","button","disabled","",1,"send-comment__button","loading-button"],["role","status",1,"spinner-border"]],template:function(e,n){1&e&&(i.Pb(0,"div",0),i.rc(1,m,2,3,"div",1),i.Pb(2,"div",2),i.Pb(3,"div",3),i.Xb("click",(function(){return n.goToUser()})),i.Pb(4,"span",4),i.Nb(5,"img",5),i.Ob(),i.Pb(6,"span",6),i.sc(7,"::"),i.Ob(),i.Pb(8,"span",7),i.Pb(9,"span",8),i.sc(10),i.Ob(),i.Nb(11,"br"),i.Pb(12,"span",9),i.sc(13),i.Ob(),i.Ob(),i.Ob(),i.rc(14,b,3,0,"div",10),i.rc(15,p,20,0,"div",11),i.Ob(),i.Pb(16,"p",12),i.rc(17,h,2,1,"span",13),i.sc(18),i.Ob(),i.Pb(19,"div",14),i.Pb(20,"div",15),i.Pb(21,"button",16),i.Xb("click",(function(){return n.like()})),i.rc(22,f,6,0,"svg",17),i.rc(23,v,5,0,"svg",18),i.rc(24,_,2,3,"span",19),i.rc(25,x,2,0,"span",20),i.Ob(),i.Ob(),i.Pb(26,"div",21),i.Pb(27,"button",22),i.Xb("click",(function(){return n.toggleComment=!n.toggleComment})),i.Pb(28,"span",23),i.sc(29,"Reply"),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.rc(30,O,8,0,"div",24),i.rc(31,M,14,8,"div",1),i.Ob()),2&e&&(i.hc("id",n.answer._id),i.Bb(1),i.hc("ngIf",n.editComment),i.Bb(4),i.hc("src",null==n.answer||null==n.answer.user?null:n.answer.user.profilePictureThumbnail,i.oc),i.Bb(5),i.tc(null==n.answer||null==n.answer.user?null:n.answer.user.username),i.Bb(3),i.uc("",null==n.answer?null:n.answer.created," ago"),i.Bb(1),i.hc("ngIf",n.authService.currentUser&&(n.authService.currentUser.isAdmin||n.answer.user.username===n.authService.currentUser.username)),i.Bb(1),i.hc("ngIf",n.toggleEdit),i.Bb(1),i.Db("focus",n.authService.scrollTo==n.answer._id),i.Bb(1),i.hc("ngIf",n.answer.parent!=n.timeline._id),i.Bb(1),i.tc(null==n.answer?null:n.answer.discussion),i.Bb(4),i.hc("ngIf",null==n.answer?null:n.answer.likedByUser),i.Bb(1),i.hc("ngIf",!(null!=n.answer&&n.answer.likedByUser)),i.Bb(1),i.hc("ngIf",n.answer.count>0),i.Bb(1),i.hc("ngIf",0==n.answer.count),i.Bb(5),i.hc("ngIf",n.toggleComment&&!n.authService.currentUser),i.Bb(1),i.hc("ngIf",n.toggleComment&&n.authService.currentUser))},directives:[d.j,g.a,u.a,u.j,u.l],styles:["ol[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.sorting__text[_ngcontent-%COMP%]{display:inline-block;margin:0 5px;font-size:1.5rem;font-weight:500;color:#7c7c7c}.sort-active[_ngcontent-%COMP%]{color:#4264d0}.sorting__icon[_ngcontent-%COMP%]{font-size:18px;color:#7c7c7c;margin-right:5px}.sorting__button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.sorting__options[_ngcontent-%COMP%]{background:#fff;position:absolute;top:20px;right:5px;width:125px;z-index:300;border-radius:5px;box-shadow:0 2px 4px 0 rgba(28,28,28,.2);overflow:hidden}.bi-caret-down-fill[_ngcontent-%COMP%]{color:#7c7c7c}.sorting__item[_ngcontent-%COMP%]{padding:15px 10px;width:100%;height:100%;cursor:pointer}.sorting__item[_ngcontent-%COMP%]:hover{background:#d8d8d8}.delete-thread[_ngcontent-%COMP%]{font-size:16px;color:#000;cursor:pointer;border-radius:50px;width:26px;height:26px;display:flex;align-items:center;justify-content:center;z-index:9}.delete-thread[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.297)}.spinner[_ngcontent-%COMP%]{color:#7c7c7c;margin:10px 0 15px}div.header-link[_ngcontent-%COMP%]{display:table;padding:16px 0 10px;height:59px}.top-thread[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;align-items:center;height:59px;margin-bottom:4px}.ago[_ngcontent-%COMP%]{position:absolute;top:18px;right:16px;color:#a2a4a6;font-size:12px}.transparent[_ngcontent-%COMP%], .user-info[_ngcontent-%COMP%]   .span-userimage[_ngcontent-%COMP%]{vertical-align:middle;display:table-cell}.user-info[_ngcontent-%COMP%]{cursor:pointer}.username[_ngcontent-%COMP%]:hover{text-decoration:underline}.children-container[_ngcontent-%COMP%]{padding-left:20px}.loading-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:5px;height:32px}span.responding[_ngcontent-%COMP%]{color:#4264d0!important;display:inline-block!important;margin-right:5px!important}.profile-picture[_ngcontent-%COMP%]{border-radius:50%;height:28px;width:28px;-o-object-fit:cover;object-fit:cover}ion-tab-bar[_ngcontent-%COMP%]{display:none}.by-username[_ngcontent-%COMP%]{color:#000;font-weight:500;font-size:1.3rem;margin-left:10px;vertical-align:middle;display:table-cell}.by-username[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#a1a1a1;font-size:12px;font-weight:400}.level[_ngcontent-%COMP%]{width:15px;-o-object-fit:contain;object-fit:contain;margin:-3px 1px -2px 4px}.level[_ngcontent-%COMP%], .level-container[_ngcontent-%COMP%]{height:15px}.discussion[_ngcontent-%COMP%]{padding:0;margin:0;color:#14171a;white-space:pre-wrap;font-size:1.5rem;line-height:135%}.ion-item-btn[_ngcontent-%COMP%]{padding:2px 0 4px}ion-icon.heart-icon[_ngcontent-%COMP%]{font-size:15px;margin-right:5px!important}.comment-icon[_ngcontent-%COMP%]{font-size:14px;margin-right:5px!important}.comment-div[_ngcontent-%COMP%]{width:58px}.cero-likes[_ngcontent-%COMP%]{margin-left:-1px}.reply-icon[_ngcontent-%COMP%]{font-size:15px;margin-right:8px!important}.reply-div[_ngcontent-%COMP%]{margin:0 0 0 auto}.count[_ngcontent-%COMP%]{font-weight:500}.count[_ngcontent-%COMP%], .reply[_ngcontent-%COMP%]{font-size:14px;color:#989aa2}.reply[_ngcontent-%COMP%]{font-weight:400}.custom-btn[_ngcontent-%COMP%]{color:#eb4b59!important}.like-div[_ngcontent-%COMP%]{display:inline-block;padding-left:3px;width:55px}.reply-div[_ngcontent-%COMP%]{padding-right:6px;width:90px}.likes[_ngcontent-%COMP%]{font-size:14px;color:#989aa2;font-weight:500}ion-avatar[_ngcontent-%COMP%]{width:0;height:0}.actions[_ngcontent-%COMP%]{margin-top:4px;height:35px}.actions[_ngcontent-%COMP%], .post-actions[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.post-actions[_ngcontent-%COMP%]{margin-top:5px;height:40px;justify-content:flex-start}.post-actions__action[_ngcontent-%COMP%]{font-size:1.4rem;padding:5px 0;border-radius:3px}.post-actions__text[_ngcontent-%COMP%]{margin-left:5px;display:inline-block;margin-top:-1px;color:#7c7c7c}.take-actions-icon[_ngcontent-%COMP%]{height:14px;margin-top:-2px}.take-actions-icon[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]{fill:#7c7c7c}.share-div[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:500}.icon-div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;font-size:1.3rem;width:60px}.heart-div[_ngcontent-%COMP%]:hover > .post-actions__text[_ngcontent-%COMP%]{color:#eb4b59!important}.heart-div[_ngcontent-%COMP%]:hover > svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#eb4b59!important}.heart-div[_ngcontent-%COMP%]:hover, .liked[_ngcontent-%COMP%]{color:#eb4b59!important}.replies-div[_ngcontent-%COMP%]{padding-bottom:7px;padding-top:1px}.more-replies[_ngcontent-%COMP%]{font-size:1.4rem;color:#4264d0}.more-replies[_ngcontent-%COMP%]   .caret[_ngcontent-%COMP%]{margin-right:5px}.more-replies[_ngcontent-%COMP%]   .caret[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#4264d0!important}button[_ngcontent-%COMP%]{background:none;color:inherit;border:none;padding:0;font:inherit;cursor:pointer;outline:inherit}.add-comment[_ngcontent-%COMP%]{border-radius:4px;overflow:hidden;background:#fff;border:1px solid #dcdddf;flex:1}.add-comment[_ngcontent-%COMP%]   .add-comment__textarea-container[_ngcontent-%COMP%]{overflow:hidden auto;padding:8px 0;resize:vertical}.add-comment[_ngcontent-%COMP%]   .add-comment__textarea[_ngcontent-%COMP%]:focus{opacity:1}.add-comment[_ngcontent-%COMP%]   .add-comment__textarea[_ngcontent-%COMP%]{overflow-wrap:break-word;height:56px;opacity:.5;font-size:1.5rem;font-weight:400;line-height:20px;background:transparent;border:none;box-sizing:border-box;display:block;outline:none;resize:none;width:100%;height:100%;padding:0 16px}.add-comment[_ngcontent-%COMP%]   .mid-textarea[_ngcontent-%COMP%]{height:100%}.send-comment[_ngcontent-%COMP%]{height:42px;padding:3px 0;display:flex;height:100%;align-items:center;justify-content:flex-end}.send-comment[_ngcontent-%COMP%]   .cancel-comment__button[_ngcontent-%COMP%]{background:transparent;color:grey}.send-comment[_ngcontent-%COMP%]   .cancel-comment__button[_ngcontent-%COMP%], .send-comment[_ngcontent-%COMP%]   .send-comment__button[_ngcontent-%COMP%]{line-height:normal;min-height:27px;min-width:96px;order:2;border:1px solid transparent;border-radius:4px;box-sizing:border-box;text-align:center;text-decoration:none;font-size:12px;font-weight:700;line-height:24px;text-transform:uppercase;padding:3px 16px}.send-comment[_ngcontent-%COMP%]   .send-comment__button[_ngcontent-%COMP%]{margin:4px 8px;background:#4264d0;color:#fff}.send-comment[_ngcontent-%COMP%]   .send-comment__button[_ngcontent-%COMP%]:hover{opacity:.5}.focused[_ngcontent-%COMP%]{border:1px solid #000!important}.add-comment-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:flex-start;margin-top:10px}.add-comment-container[_ngcontent-%COMP%]   .add-comment-user[_ngcontent-%COMP%]{margin-right:15px;width:40px}.add-comment-container[_ngcontent-%COMP%]   .add-comment-user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:50px;-o-object-fit:cover;object-fit:cover}.disabled[_ngcontent-%COMP%]{opacity:.6}.focus[_ngcontent-%COMP%]{background:#ebf4ff}.login-text[_ngcontent-%COMP%]{font-size:1.6rem;color:#7c7c7c;font-weight:500}.login-comment[_ngcontent-%COMP%]{align-items:center;border-radius:4px;border:1px solid #dcdddf;display:flex;justify-content:space-between;padding:15px 10px;margin:15px 0}.login-buttons[_ngcontent-%COMP%]{display:flex;margin-left:10px}.login[_ngcontent-%COMP%]{height:34px;width:90px;margin-right:15px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.2rem;border:1px solid #4264d0;color:#4264d0;padding:0 20px;border-radius:5px;cursor:pointer;text-transform:uppercase}.login[_ngcontent-%COMP%]:hover{background:rgba(64,97,211,.31)}.signup[_ngcontent-%COMP%]{height:34px;width:160px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.2rem;border:1px solid #4264d0;background:#4264d0;color:#fff;padding:0 20px;border-radius:5px;cursor:pointer;text-transform:uppercase}.signup[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-top:1px}.signup[_ngcontent-%COMP%]:hover{background:#93a8ec;border:1px solid #93a8ec}@media only screen and (max-width:800px){.add-comment-user[_ngcontent-%COMP%]{display:none}.login-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.login-text[_ngcontent-%COMP%]{display:none}}"]}),e}()}}]);